<!DOCTYPE html>
<html class="no-js" lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>技术总结分享 | 攻城狮小武</title>
  <meta name="viewport" content="width=1430, initial-scale=1">

  <link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="攻城狮小武 &raquo; Feed" href="/feed" />
<link rel="alternate" type="application/rss+xml" title="攻城狮小武 &raquo; 评论Feed" href="/comments/feed" />
<link rel="alternate" type="application/rss+xml" title="攻城狮小武 &raquo; 技术总结分享分类目录Feed" href="/archives/category/uncategorized/feed" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/www.tiaobug.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.8.12"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,56826,8203,55356,56819),0,0),c=j.toDataURL(),b!==c&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55358,56794,8205,9794,65039),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55358,56794,8203,9794,65039),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='crayon-css'  href='/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-tomorrow-night-css'  href='/wp-content/plugins/crayon-syntax-highlighter/themes/tomorrow-night/tomorrow-night.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='dw_timeline_main-css'  href='/wp-content/themes/dw-timeline/assets/css/main.css?ver=6c39f42987ae297a5a21e2bb35bf3402' type='text/css' media='all' />
<link rel='stylesheet' id='dw_timeline_style-css'  href='/wp-content/themes/dw-timeline/style.css?ver=c1a58eb4baaf24c3771085df3d54ff8d' type='text/css' media='all' />
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/www.tiaobug.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=_2.7.2_beta'></script>
<script type='text/javascript' src='/wp-content/themes/dw-timeline/assets/js/vendor/modernizr-2.7.0.min.js'></script>
<script type='text/javascript' src='/wp-content/themes/dw-timeline/assets/js/vendor/nivo-lightbox.min.js'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.8.12" />
<link rel="shortcut icon" href="/wp-content/uploads/2017/12/WP3-副本.jpg">    <style>
    
        
    
          .banner hgroup:after {
        background: none;
      }   
    
    </style>    
    <link rel="icon" href="/wp-content/uploads/2017/12/cropped-WP3-副本-32x32.jpg" sizes="32x32" />
<link rel="icon" href="/wp-content/uploads/2017/12/cropped-WP3-副本-192x192.jpg" sizes="192x192" />
<link rel="apple-touch-icon-precomposed" href="/wp-content/uploads/2017/12/cropped-WP3-副本-180x180.jpg" />
<meta name="msapplication-TileImage" content="http://www.tiaobug.com/wp-content/uploads/2017/12/cropped-WP3-副本-270x270.jpg" />
		<style type="text/css" id="wp-custom-css">
			/*
您可以在此处加入您的CSS。

点击上方的帮助图标来了解更多。
*/
.wrap {
    padding-bottom: 100px;
}
.bottom-info{
    clear: both;
    position: fixed;
    bottom: 0px;
    background-color: #e5e5e5;
    z-index: 1000;
    text-align: center;
    width: 100%;
}		</style>
	  <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?d68c66f0010a97131e967e4bab927275";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
</head>
<body class="archive paged category category-uncategorized category-1 paged-5 category-paged-5">
    
<header class="banner cover" role="banner">
  <div class="header-inner">
      <nav class="nav-main" role="navigation">
        <div class="container">
                </div>
      </nav>
              <hgroup>
          <div class="container">
            <h1 class="page-title" style="border:0px">
              <a href="/contactme">技术总结分享</a>
            </h1>
            <h2 class="page-description">tiaobug.com</h2>
            <button id="get-started" class="btn btn-default btn-coner">来都来了，瞅两眼吧！</button>
          </div>
        </hgroup>
        </div>
</header>  <div class="wrap container" role="document">
    <div class="content row">
      <main class="main col-sm-12" role="main">
        <div class="timeline two-col">
  <div data-page="1" class="timeline-pale dwtl full"><span>Page 1</span></div>
      <div class="timeline-scrubber"><ul><li  class="active"  data-page="1"><a href="#" >Page 1</a></li><li  data-page="2"><a href="#" >Page 2</a></li><li  data-page="3"><a href="#" >Page 3</a></li><li  data-page="4"><a href="#" >Page 4</a></li><li  data-page="5"><a href="#" >Page 5</a></li><li  data-page="6"><a href="#" >Page 6</a></li><li  data-page="7"><a href="#" >Page 7</a></li><li  data-page="8"><a href="#" >Page 8</a></li><li  data-page="9"><a href="#" >Page 9</a></li></ul></div>          <article data-page="5" class="post-279 post type-post status-publish format-status hentry category-uncategorized post_format-post-format-status dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">状态</div>
    <header>
      <h2 class="entry-title"><a href="/archives/279.html">115的云盘续费已经从45涨到320，表示得告别115了。我担心续费，115还能不能撑到明年。</a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/279.html"><time class="published" datetime="2017-07-01T10:49:18+00:00">2017年7月1日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/uncategorized" rel="category tag">技术总结分享</a></span>
</div>
    </header>
    <div class="entry-content">
          </div>
  </div>
</article>
          <article data-page="5" class="post-275 post type-post status-publish format-standard hentry category-uncategorized dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">标准</div>
    <header>
      <h2 class="entry-title"><a href="/archives/275.html">自动下载七牛日志CDN日志</a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/275.html"><time class="published" datetime="2017-06-22T21:18:32+00:00">2017年6月22日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/uncategorized" rel="category tag">技术总结分享</a></span>
</div>
    </header>
    <div class="entry-content">
      <p>最近在做日志分析，发现有些静态页面的内容是携带重要参数的，七牛的cdn提供了日志下载接口，但是没有完全自动化。</p>
<p>跟客服沟通后，确实是没有，没办法只能自己造个轮子，决定把七牛的log拿过来，自己处理分析。</p>
<p>关于七牛日志的一些说明和描述在这里</p>
<p>https://developer.qiniu.com/fusion/api/1226/download-the-log</p>
<p>所以最好是写个脚本，每天中午十一点自动执行。单纯的shell脚本无法全部完成，所以还得结合一些python。不过关于日志下载列表这块，七牛的sdk有个坑，待会说。</p>
<p>做好的shell脚本：</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5df717023a44d095129286" class="crayon-syntax crayon-theme-tomorrow-night crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
#!/bin/sh

#retrive yesterday logs from qiniu cdn every 11:00 am
#see https://developer.qiniu.com/fusion/api/1226/download-the-log

yesterday=`date -d -1day +%Y-%m-%d`  

if [ ! -z "$1" ] ;then
  yesterday="$1"
else
  echo "no input, user yesterday!"
fi


echo $yesterday
echo "--------------  $yesterday 's logs begin to collect"
cd /opt/qiniu_logs/logs/
rm -rf *.log

python /opt/qiniu_logs/downloadlogs.py $yesterday
echo "-------------- create download shell "

while read line
do
$line
done &lt; '/opt/qiniu_logs/target.list'
gzip -d *.gz
for i in `ls`; do mv -f $i `echo $i".log"`; done
echo "-------------- download and unzip "

java -jar /opt/qiniu_logs/a.jar demo.LogCollecter</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5df717023a44d095129286-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a44d095129286-2">2</div><div class="crayon-num" data-line="crayon-5df717023a44d095129286-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a44d095129286-4">4</div><div class="crayon-num" data-line="crayon-5df717023a44d095129286-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a44d095129286-6">6</div><div class="crayon-num" data-line="crayon-5df717023a44d095129286-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a44d095129286-8">8</div><div class="crayon-num" data-line="crayon-5df717023a44d095129286-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a44d095129286-10">10</div><div class="crayon-num" data-line="crayon-5df717023a44d095129286-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a44d095129286-12">12</div><div class="crayon-num" data-line="crayon-5df717023a44d095129286-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a44d095129286-14">14</div><div class="crayon-num" data-line="crayon-5df717023a44d095129286-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a44d095129286-16">16</div><div class="crayon-num" data-line="crayon-5df717023a44d095129286-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a44d095129286-18">18</div><div class="crayon-num" data-line="crayon-5df717023a44d095129286-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a44d095129286-20">20</div><div class="crayon-num" data-line="crayon-5df717023a44d095129286-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a44d095129286-22">22</div><div class="crayon-num" data-line="crayon-5df717023a44d095129286-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a44d095129286-24">24</div><div class="crayon-num" data-line="crayon-5df717023a44d095129286-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a44d095129286-26">26</div><div class="crayon-num" data-line="crayon-5df717023a44d095129286-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a44d095129286-28">28</div><div class="crayon-num" data-line="crayon-5df717023a44d095129286-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a44d095129286-30">30</div><div class="crayon-num" data-line="crayon-5df717023a44d095129286-31">31</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5df717023a44d095129286-1"><span class="crayon-p">#!/bin/sh</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a44d095129286-2">&nbsp;</div><div class="crayon-line" id="crayon-5df717023a44d095129286-3"><span class="crayon-c">#retrive yesterday logs from qiniu cdn every 11:00 am</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a44d095129286-4"><span class="crayon-c">#see https://developer.qiniu.com/fusion/api/1226/download-the-log</span></div><div class="crayon-line" id="crayon-5df717023a44d095129286-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a44d095129286-6"><span class="crayon-v">yesterday</span><span class="crayon-o">=</span><span class="crayon-sy">`</span><span class="crayon-r">date</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">d</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">1day</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-o">%</span><span class="crayon-v">Y</span><span class="crayon-o">-</span><span class="crayon-o">%</span><span class="crayon-v">m</span><span class="crayon-o">-</span><span class="crayon-o">%</span><span class="crayon-v">d</span><span class="crayon-sy">`</span><span class="crayon-h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-5df717023a44d095129286-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a44d095129286-8"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-h"> </span><span class="crayon-o">!</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">z</span><span class="crayon-h"> </span><span class="crayon-s">"$1"</span><span class="crayon-h"> </span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-sy">;</span><span class="crayon-st">then</span></div><div class="crayon-line" id="crayon-5df717023a44d095129286-9"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">yesterday</span><span class="crayon-o">=</span><span class="crayon-s">"$1"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a44d095129286-10"><span class="crayon-st">else</span></div><div class="crayon-line" id="crayon-5df717023a44d095129286-11"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">echo</span><span class="crayon-h"> </span><span class="crayon-s">"no input, user yesterday!"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a44d095129286-12"><span class="crayon-st">fi</span></div><div class="crayon-line" id="crayon-5df717023a44d095129286-13">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a44d095129286-14">&nbsp;</div><div class="crayon-line" id="crayon-5df717023a44d095129286-15"><span class="crayon-r">echo</span><span class="crayon-h"> </span><span class="crayon-v">$yesterday</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a44d095129286-16"><span class="crayon-r">echo</span><span class="crayon-h"> </span><span class="crayon-s">"--------------&nbsp;&nbsp;$yesterday 's logs begin to collect"</span></div><div class="crayon-line" id="crayon-5df717023a44d095129286-17"><span class="crayon-r">cd</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">opt</span><span class="crayon-o">/</span><span class="crayon-v">qiniu_logs</span><span class="crayon-o">/</span><span class="crayon-v">logs</span><span class="crayon-o">/</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a44d095129286-18"><span class="crayon-r">rm</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">rf</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-e">.log</span></div><div class="crayon-line" id="crayon-5df717023a44d095129286-19">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a44d095129286-20"><span class="crayon-v">python</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">opt</span><span class="crayon-o">/</span><span class="crayon-v">qiniu_logs</span><span class="crayon-o">/</span><span class="crayon-v">downloadlogs</span><span class="crayon-e">.py</span><span class="crayon-h"> </span><span class="crayon-v">$yesterday</span></div><div class="crayon-line" id="crayon-5df717023a44d095129286-21"><span class="crayon-r">echo</span><span class="crayon-h"> </span><span class="crayon-s">"-------------- create download shell "</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a44d095129286-22">&nbsp;</div><div class="crayon-line" id="crayon-5df717023a44d095129286-23"><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-r">read</span><span class="crayon-h"> </span><span class="crayon-e">line</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a44d095129286-24"><span class="crayon-st">do</span></div><div class="crayon-line" id="crayon-5df717023a44d095129286-25"><span class="crayon-v">$line</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a44d095129286-26"><span class="crayon-st">done</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-s">'/opt/qiniu_logs/target.list'</span></div><div class="crayon-line" id="crayon-5df717023a44d095129286-27"><span class="crayon-v">gzip</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">d</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-e">.gz</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a44d095129286-28"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-sy">`</span><span class="crayon-r">ls</span><span class="crayon-sy">`</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-st">do</span><span class="crayon-h"> </span><span class="crayon-r">mv</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">f</span><span class="crayon-h"> </span><span class="crayon-v">$i</span><span class="crayon-h"> </span><span class="crayon-sy">`</span><span class="crayon-r">echo</span><span class="crayon-h"> </span><span class="crayon-v">$i</span><span class="crayon-s">".log"</span><span class="crayon-sy">`</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-st">done</span></div><div class="crayon-line" id="crayon-5df717023a44d095129286-29"><span class="crayon-r">echo</span><span class="crayon-h"> </span><span class="crayon-s">"-------------- download and unzip "</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a44d095129286-30">&nbsp;</div><div class="crayon-line" id="crayon-5df717023a44d095129286-31"><span class="crayon-v">java</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">jar</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">opt</span><span class="crayon-o">/</span><span class="crayon-v">qiniu_logs</span><span class="crayon-o">/</span><span class="crayon-v">a</span><span class="crayon-e">.jar</span><span class="crayon-h"> </span><span class="crayon-v">demo</span><span class="crayon-e">.LogCollecter</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0041 seconds] -->
<p>&nbsp;</p>
<p>调用的python脚本：</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5df717023a459831547487" class="crayon-syntax crayon-theme-tomorrow-night crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
# -*- coding: utf-8 -*-
import qiniu
import requests
from qiniu import Auth
from qiniu import CdnManager
from qiniu import http
from qiniu import create_timestamp_anti_leech_url
import time
import json
import sys


# 账户ak，sk
access_key = 'ZXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'
secret_key = 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'

auth = qiniu.Auth(access_key=access_key, secret_key=secret_key)
cdn_manager = CdnManager(auth)

def print_result(result):
    if result[0] is not None:
        print(type(result[0]))
        print(result[0])

    print(type(result[1]))
    print(result[1])


domains = ['XXXXXX.iuu.travel', 'YYYYYYYYY.iuu.travel']


# 获取日志列表
#print('获取日志列表')
log_date =sys.argv[1] 
log_data = cdn_manager.get_log_list_data(domains, log_date)
dict = log_data[0]
urls1=dict["data"]["xxxxxxxx.iuu.travel"]
urls2=dict["data"]["yyyyyyyy.iuu.travel"]

f = open('/opt/qiniu_logs/target.list', 'w')
num=1
for i in urls1:
  a=i["url"].replace("&amp;","\&amp;")
  S="wget -q "+a+" -O app_"+log_date+"_"+str(num)+".gz \n"
  f.write(S)
  num=num+1
  
num=1
for i in urls2:
  a=i["url"].replace("&amp;","\&amp;")
  S="wget -q "+a+" -O api_"+log_date+"_"+str(num)+".gz \n"
  f.write(S)
  num=num+1

f.close</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5df717023a459831547487-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-2">2</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-4">4</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-6">6</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-8">8</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-10">10</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-12">12</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-14">14</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-16">16</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-18">18</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-20">20</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-22">22</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-24">24</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-26">26</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-28">28</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-30">30</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-32">32</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-34">34</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-36">36</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-38">38</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-40">40</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-42">42</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-44">44</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-46">46</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-48">48</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-50">50</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-52">52</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023a459831547487-54">54</div><div class="crayon-num" data-line="crayon-5df717023a459831547487-55">55</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5df717023a459831547487-1"><span class="crayon-c"># -*- coding: utf-8 -*-</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-2"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">qiniu</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-3"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">requests</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-4"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">qiniu </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">Auth</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-5"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">qiniu </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">CdnManager</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-6"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">qiniu </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">http</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-7"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">qiniu </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">create_timestamp_anti_leech_url</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-8"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k">time</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-9"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k">json</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-10"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k">sys</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-12">&nbsp;</div><div class="crayon-line" id="crayon-5df717023a459831547487-13"><span class="crayon-c"># 账户ak，sk</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-14"><span class="crayon-v">access_key</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'ZXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-15"><span class="crayon-v">secret_key</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-16">&nbsp;</div><div class="crayon-line" id="crayon-5df717023a459831547487-17"><span class="crayon-v">auth</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">qiniu</span><span class="crayon-sy">.</span><span class="crayon-e">Auth</span><span class="crayon-sy">(</span><span class="crayon-v">access_key</span><span class="crayon-o">=</span><span class="crayon-v">access_key</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">secret_key</span><span class="crayon-o">=</span><span class="crayon-v">secret_key</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-18"><span class="crayon-v">cdn_manager</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">CdnManager</span><span class="crayon-sy">(</span><span class="crayon-v">auth</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-19">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-20"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">print_result</span><span class="crayon-sy">(</span><span class="crayon-v">result</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-t">None</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k">print</span><span class="crayon-sy">(</span><span class="crayon-k">type</span><span class="crayon-sy">(</span><span class="crayon-v">result</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k">print</span><span class="crayon-sy">(</span><span class="crayon-v">result</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-24">&nbsp;</div><div class="crayon-line" id="crayon-5df717023a459831547487-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k">print</span><span class="crayon-sy">(</span><span class="crayon-k">type</span><span class="crayon-sy">(</span><span class="crayon-v">result</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k">print</span><span class="crayon-sy">(</span><span class="crayon-v">result</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-27">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-28">&nbsp;</div><div class="crayon-line" id="crayon-5df717023a459831547487-29"><span class="crayon-v">domains</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'XXXXXX.iuu.travel'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'YYYYYYYYY.iuu.travel'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-30">&nbsp;</div><div class="crayon-line" id="crayon-5df717023a459831547487-31">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-32"><span class="crayon-c"># 获取日志列表</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-33"><span class="crayon-c">#print('获取日志列表')</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-34"><span class="crayon-v">log_date</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-k">sys</span><span class="crayon-sy">.</span><span class="crayon-v">argv</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5df717023a459831547487-35"><span class="crayon-v">log_data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cdn_manager</span><span class="crayon-sy">.</span><span class="crayon-e">get_log_list_data</span><span class="crayon-sy">(</span><span class="crayon-v">domains</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">log_date</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-36"><span class="crayon-k">dict</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">log_data</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-37"><span class="crayon-v">urls1</span><span class="crayon-o">=</span><span class="crayon-k">dict</span><span class="crayon-sy">[</span><span class="crayon-s">"data"</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">"xxxxxxxx.iuu.travel"</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-38"><span class="crayon-v">urls2</span><span class="crayon-o">=</span><span class="crayon-k">dict</span><span class="crayon-sy">[</span><span class="crayon-s">"data"</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">"yyyyyyyy.iuu.travel"</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-39">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-40"><span class="crayon-v">f</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k">open</span><span class="crayon-sy">(</span><span class="crayon-s">'/opt/qiniu_logs/target.list'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'w'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-41"><span class="crayon-v">num</span><span class="crayon-o">=</span><span class="crayon-cn">1</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-42"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">urls1</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-43"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">a</span><span class="crayon-o">=</span><span class="crayon-v">i</span><span class="crayon-sy">[</span><span class="crayon-s">"url"</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">replace</span><span class="crayon-sy">(</span><span class="crayon-s">"&amp;"</span><span class="crayon-sy">,</span><span class="crayon-s">"\&amp;"</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-44"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">S</span><span class="crayon-o">=</span><span class="crayon-s">"wget -q "</span><span class="crayon-o">+</span><span class="crayon-v">a</span><span class="crayon-o">+</span><span class="crayon-s">" -O app_"</span><span class="crayon-o">+</span><span class="crayon-v">log_date</span><span class="crayon-o">+</span><span class="crayon-s">"_"</span><span class="crayon-o">+</span><span class="crayon-k">str</span><span class="crayon-sy">(</span><span class="crayon-v">num</span><span class="crayon-sy">)</span><span class="crayon-o">+</span><span class="crayon-s">".gz \n"</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-45"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">f</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-46"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">num</span><span class="crayon-o">=</span><span class="crayon-v">num</span><span class="crayon-o">+</span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-47"><span class="crayon-h">&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-48"><span class="crayon-v">num</span><span class="crayon-o">=</span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-49"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">urls2</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-50"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">a</span><span class="crayon-o">=</span><span class="crayon-v">i</span><span class="crayon-sy">[</span><span class="crayon-s">"url"</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">replace</span><span class="crayon-sy">(</span><span class="crayon-s">"&amp;"</span><span class="crayon-sy">,</span><span class="crayon-s">"\&amp;"</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-51"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">S</span><span class="crayon-o">=</span><span class="crayon-s">"wget -q "</span><span class="crayon-o">+</span><span class="crayon-v">a</span><span class="crayon-o">+</span><span class="crayon-s">" -O api_"</span><span class="crayon-o">+</span><span class="crayon-v">log_date</span><span class="crayon-o">+</span><span class="crayon-s">"_"</span><span class="crayon-o">+</span><span class="crayon-k">str</span><span class="crayon-sy">(</span><span class="crayon-v">num</span><span class="crayon-sy">)</span><span class="crayon-o">+</span><span class="crayon-s">".gz \n"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-52"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">f</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5df717023a459831547487-53"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">num</span><span class="crayon-o">=</span><span class="crayon-v">num</span><span class="crayon-o">+</span><span class="crayon-cn">1</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023a459831547487-54">&nbsp;</div><div class="crayon-line" id="crayon-5df717023a459831547487-55"><span class="crayon-v">f</span><span class="crayon-sy">.</span><span class="crayon-v">close</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0104 seconds] -->
<p>python脚本主要的工作是把七牛日志的url列表获取到。</p>
<p>url格式：</p>
<p>http://fusionlog.qiniu.com/v2/app.iuu.travel_2017-06-21-08_part-00000.gz?e=1529561090\&#038;token=557TpseUM8ovpfUhaw8gfa2DQ0104ZScM-BTIcBx:JJyYu9oG6r44TUalBz_-1mBTuzM</p>
<p>拼接成一个wget的语句写入到文本文件中，但是这个地方一定要注意生成的时候 wget的url要转移?，这个坑搞了好久才跳出来，调试时明明在本地可以，到服务器上就不行了，后来才发现服务器的报错提示无授权，才发现token传的不对。</p>
<p>处理后的格式：</p>
<p>wget -q http://fusionlog.qiniu.com/v2/app.iuu.travel_2017-06-21-08_part-00000.gz?e=1529561090\&amp;token=557TpseUM8ovpfUhaw8gfa2DQ0104ZScM-BTIcBx:JJyYu9oG6r44TUal<br />
Bz_-1mBTuzM -O app_2017-06-21_9.gz</p>
<p>最后补充一点，这个地方的七牛的python版本sdk，pip安装的有个bug，issue在这里https://github.com/qiniu/python-sdk/issues/264</p>
<p>直接下载源码安装就能搞定这个问题了。</p>
<p>&nbsp;</p>
<p>这样就可以在七牛服务器上定期的下载日志了，接下来是手动处理还是代码处理，还是直接导入到数据库，就看自己需求了。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
    </div>
  </div>
</article>
          <article data-page="5" class="post-272 post type-post status-publish format-standard hentry category-uncategorized dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">标准</div>
    <header>
      <h2 class="entry-title"><a href="/archives/272.html">TheFuck，一款够炫酷的命令行提示工具</a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/272.html"><time class="published" datetime="2017-05-05T16:15:55+00:00">2017年5月5日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/uncategorized" rel="category tag">技术总结分享</a></span>
</div>
    </header>
    <div class="entry-content">
      <p><a href="https://github.com/nvbn/thefuck"><img class="alignnone size-full" src="https://raw.githubusercontent.com/nvbn/thefuck/master/example.gif" width="686" height="379" /></a></p>
    </div>
  </div>
</article>
          <article data-page="5" class="post-266 post type-post status-publish format-standard hentry category-uncategorized dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">标准</div>
    <header>
      <h2 class="entry-title"><a href="/archives/266.html">多主键的MAP结构</a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/266.html"><time class="published" datetime="2017-04-08T17:13:36+00:00">2017年4月8日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/uncategorized" rel="category tag">技术总结分享</a></span>
</div>
    </header>
    <div class="entry-content">
      <p>遇到一个编码的需求，最好是能支持对一个对象的多键值查找，类似实现数据库表的多主键查询。</p>
<p>在JDK里寻摸半天没有找到，扫了一眼apache网站，发现一个好玩意。</p>
<p>http://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/MultiKeyMap.html</p>
<p>&nbsp;</p>
<p>最多可以支持5个Key，够用了。</p>
    </div>
  </div>
</article>
          <article data-page="5" class="post-264 post type-post status-publish format-status hentry category-uncategorized post_format-post-format-status dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">状态</div>
    <header>
      <h2 class="entry-title"><a href="/archives/264.html">微信企业号里的应用有很多的是免费的，发现企微不错，把日报、审批和会议等小工具用上，发现确实挺好用，推荐！</a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/264.html"><time class="published" datetime="2017-04-08T17:06:10+00:00">2017年4月8日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/uncategorized" rel="category tag">技术总结分享</a></span>
</div>
    </header>
    <div class="entry-content">
          </div>
  </div>
</article>
          <article data-page="5" class="post-262 post type-post status-publish format-link hentry category-uncategorized post_format-post-format-link dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">链接</div>
    <header>
      <h2 class="entry-title"><a href="/archives/262.html">发现阿里云的镜像竟然很全，而且速度真是不错。</a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/262.html"><time class="published" datetime="2017-04-05T15:12:22+00:00">2017年4月5日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/uncategorized" rel="category tag">技术总结分享</a></span>
</div>
    </header>
    <div class="entry-content">
      <p>http://mirrors.aliyun.com</p>
<p>覆盖了Debian、Ubuntu、 Fedora、Arch Linux、 CentOS、openSUSE、Scientific Linux、Gentoo 等多个发行版的软件源镜像。</p>
    </div>
  </div>
</article>
          <article data-page="5" class="post-258 post type-post status-publish format-standard hentry category-uncategorized dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">标准</div>
    <header>
      <h2 class="entry-title"><a href="/archives/258.html">批量将图片切成四行两列的碎片</a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/258.html"><time class="published" datetime="2017-03-31T17:02:16+00:00">2017年3月31日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/uncategorized" rel="category tag">技术总结分享</a></span>
</div>
    </header>
    <div class="entry-content">
      <p>项目中需要在leaflet上贴上单张地图，可是发现单张地图超过1M的话，加载会有延时，计划把地图批量切开，同时加载，效果应该不错。</p>
<p>事后证明这样是对的，加载时间确实有了提升。</p>
<p><a href="/wp-content/uploads/2017/03/a-1.png"><img class="alignnone  wp-image-259" src="/wp-content/uploads/2017/03/a-1.png" alt="" width="769" height="165" srcset="/wp-content/uploads/2017/03/a-1.png 1235w, /wp-content/uploads/2017/03/a-1-300x64.png 300w, /wp-content/uploads/2017/03/a-1-768x165.png 768w, /wp-content/uploads/2017/03/a-1-1024x220.png 1024w" sizes="(max-width: 769px) 100vw, 769px" /></a></p>
<p>&nbsp;</p>
<p>批量裁剪的代码：（处理过程中，牺牲了几个像素，防止出现裂缝。）</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5df717023de97444200694" class="crayon-syntax crayon-theme-tomorrow-night crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Java</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
import java.awt.Rectangle;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.util.Iterator;

import javax.imageio.ImageIO;
import javax.imageio.ImageReadParam;
import javax.imageio.ImageReader;
import javax.imageio.stream.ImageInputStream;


public class ImageCutter {
	/**
	 * 剪切点x坐标
	 */
	private int x;

	/**
	 * 剪切点y坐标
	 */
	private int y;

	/**
	 * 剪切点宽度
	 */
	private int width;

	/**
	 * 剪切点高度
	 */
	private int height;

	private String postfix = "png";

	public ImageCutter() {

	}

	public ImageCutter(int x, int y, int width, int height) {
		this.x = x;
		this.y = y;
		this.width = width;
		this.height = height;
	}

	/**
	 * 对图片裁剪，并把裁剪完蛋新图片保存 。
	 * 
	 * @param srcpath
	 *            源图片路径
	 * @param subpath
	 *            剪切图片存放路径
	 * @throws IOException
	 */
	public void cut(String srcpath, String subpath,int index) throws IOException {
		FileInputStream is = null;
		ImageInputStream iis = null;
		try {
			// 读取图片文件
			is = new FileInputStream(srcpath);

			Iterator&lt;ImageReader&gt; it = ImageIO.getImageReadersByFormatName(postfix);

			ImageReader reader = it.next();
			// 获取图片流
			iis = ImageIO.createImageInputStream(is);

			/*
			 * &lt;p&gt;iis:读取源.true:只向前搜索 &lt;/p&gt;.将它标记为 ‘只向前搜索’。
			 * 此设置意味着包含在输入源中的图像将只按顺序读取，可能允许 reader 避免缓存包含与以前已经读取的图像关联的数据的那些输入部分。
			 */
			reader.setInput(iis, true);

			/*
			 * &lt;p&gt;描述如何对流进行解码的类&lt;p&gt;.用于指定如何在输入时从 Java Image I/O
			 * 框架的上下文中的流转换一幅图像或一组图像。用于特定图像格式的插件 将从其 ImageReader 实现的
			 * getDefaultReadParam 方法中返回 ImageReadParam 的实例。
			 */
			ImageReadParam param = reader.getDefaultReadParam();

			/*
			 * 图片裁剪区域。Rectangle 指定了坐标空间中的一个区域，通过 Rectangle 对象
			 * 的左上顶点的坐标（x，y）、宽度和高度可以定义这个区域。
			 */
			Rectangle rect = new Rectangle(x, y, width, height);

			// 提供一个 BufferedImage，将其用作解码像素数据的目标。
			param.setSourceRegion(rect);
			/*
			 * 使用所提供的 ImageReadParam 读取通过索引 imageIndex 指定的对象，并将 它作为一个完整的
			 * BufferedImage 返回。
			 */
			BufferedImage bi = reader.read(0, param);
			File targetFolder = new File(subpath.replaceAll("."+postfix, "/"));
			if (!targetFolder.exists()) {
				targetFolder.mkdirs();
			}
			// 保存新图片
			ImageIO.write(bi, postfix, new File(subpath.replaceAll("."+postfix, "") + "/" + index + "." + postfix));
		} finally {
			if (is != null)
				is.close();
			if (iis != null)
				iis.close();
		}

	}
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5df717023de97444200694-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-2">2</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-4">4</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-6">6</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-8">8</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-10">10</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-12">12</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-14">14</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-16">16</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-18">18</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-20">20</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-22">22</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-24">24</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-26">26</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-28">28</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-30">30</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-32">32</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-34">34</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-36">36</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-38">38</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-40">40</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-42">42</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-44">44</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-46">46</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-48">48</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-50">50</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-52">52</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-54">54</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-56">56</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-58">58</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-60">60</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-62">62</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-64">64</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-66">66</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-68">68</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-70">70</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-72">72</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-74">74</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-76">76</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-78">78</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-80">80</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-82">82</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-84">84</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-86">86</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-88">88</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-90">90</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-92">92</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-94">94</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-96">96</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-98">98</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-99">99</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-100">100</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-101">101</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-102">102</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-103">103</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-104">104</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-105">105</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-106">106</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-107">107</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-108">108</div><div class="crayon-num" data-line="crayon-5df717023de97444200694-109">109</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023de97444200694-110">110</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5df717023de97444200694-1"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">awt</span><span class="crayon-sy">.</span><span class="crayon-v">Rectangle</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-2"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">awt</span><span class="crayon-sy">.</span><span class="crayon-v">image</span><span class="crayon-sy">.</span><span class="crayon-v">BufferedImage</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-3"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">io</span><span class="crayon-sy">.</span><span class="crayon-v">File</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-4"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">io</span><span class="crayon-sy">.</span><span class="crayon-v">FileInputStream</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-5"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">io</span><span class="crayon-sy">.</span><span class="crayon-v">IOException</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-6"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">util</span><span class="crayon-sy">.</span><span class="crayon-v">Iterator</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-8"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">javax</span><span class="crayon-sy">.</span><span class="crayon-v">imageio</span><span class="crayon-sy">.</span><span class="crayon-v">ImageIO</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-9"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">javax</span><span class="crayon-sy">.</span><span class="crayon-v">imageio</span><span class="crayon-sy">.</span><span class="crayon-v">ImageReadParam</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-10"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">javax</span><span class="crayon-sy">.</span><span class="crayon-v">imageio</span><span class="crayon-sy">.</span><span class="crayon-v">ImageReader</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-11"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">javax</span><span class="crayon-sy">.</span><span class="crayon-v">imageio</span><span class="crayon-sy">.</span><span class="crayon-v">stream</span><span class="crayon-sy">.</span><span class="crayon-v">ImageInputStream</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-12">&nbsp;</div><div class="crayon-line" id="crayon-5df717023de97444200694-13">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-14"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">ImageCutter</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-15"><span class="crayon-h">	</span><span class="crayon-c">/**</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-16"><span class="crayon-c">	 * 剪切点x坐标</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-17"><span class="crayon-c">	 */</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-18"><span class="crayon-h">	</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-19">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-20"><span class="crayon-h">	</span><span class="crayon-c">/**</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-21"><span class="crayon-c">	 * 剪切点y坐标</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-22"><span class="crayon-c">	 */</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-23"><span class="crayon-h">	</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-24">&nbsp;</div><div class="crayon-line" id="crayon-5df717023de97444200694-25"><span class="crayon-h">	</span><span class="crayon-c">/**</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-26"><span class="crayon-c">	 * 剪切点宽度</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-27"><span class="crayon-c">	 */</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-28"><span class="crayon-h">	</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">width</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-29">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-30"><span class="crayon-h">	</span><span class="crayon-c">/**</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-31"><span class="crayon-c">	 * 剪切点高度</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-32"><span class="crayon-c">	 */</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-33"><span class="crayon-h">	</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">height</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-34">&nbsp;</div><div class="crayon-line" id="crayon-5df717023de97444200694-35"><span class="crayon-h">	</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">postfix</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"png"</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-36">&nbsp;</div><div class="crayon-line" id="crayon-5df717023de97444200694-37"><span class="crayon-h">	</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">ImageCutter</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-38">&nbsp;</div><div class="crayon-line" id="crayon-5df717023de97444200694-39"><span class="crayon-h">	</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-40">&nbsp;</div><div class="crayon-line" id="crayon-5df717023de97444200694-41"><span class="crayon-h">	</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">ImageCutter</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">width</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">height</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-42"><span class="crayon-h">		</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-43"><span class="crayon-h">		</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-44"><span class="crayon-h">		</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">width</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">width</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-45"><span class="crayon-h">		</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">height</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">height</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-46"><span class="crayon-h">	</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-47">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-48"><span class="crayon-h">	</span><span class="crayon-c">/**</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-49"><span class="crayon-c">	 * 对图片裁剪，并把裁剪完蛋新图片保存 。</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-50"><span class="crayon-c">	 * </span></div><div class="crayon-line" id="crayon-5df717023de97444200694-51"><span class="crayon-c">	 * @param srcpath</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-52"><span class="crayon-c">	 *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;源图片路径</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-53"><span class="crayon-c">	 * @param subpath</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-54"><span class="crayon-c">	 *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;剪切图片存放路径</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-55"><span class="crayon-c">	 * @throws IOException</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-56"><span class="crayon-c">	 */</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-57"><span class="crayon-h">	</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">cut</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">srcpath</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">subpath</span><span class="crayon-sy">,</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">index</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-m">throws</span><span class="crayon-h"> </span><span class="crayon-e">IOException</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-58"><span class="crayon-h">		</span><span class="crayon-e">FileInputStream </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-59"><span class="crayon-h">		</span><span class="crayon-e">ImageInputStream </span><span class="crayon-v">iis</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-60"><span class="crayon-h">		</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-61"><span class="crayon-h">			</span><span class="crayon-c">// 读取图片文件</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-62"><span class="crayon-h">			</span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">FileInputStream</span><span class="crayon-sy">(</span><span class="crayon-v">srcpath</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-63">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-64"><span class="crayon-h">			</span><span class="crayon-v">Iterator</span><span class="crayon-e">&lt;ImageReader&gt;</span><span class="crayon-h"> </span><span class="crayon-v">it</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ImageIO</span><span class="crayon-sy">.</span><span class="crayon-e">getImageReadersByFormatName</span><span class="crayon-sy">(</span><span class="crayon-v">postfix</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-65">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-66"><span class="crayon-h">			</span><span class="crayon-e">ImageReader </span><span class="crayon-v">reader</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">it</span><span class="crayon-sy">.</span><span class="crayon-e">next</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-67"><span class="crayon-h">			</span><span class="crayon-c">// 获取图片流</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-68"><span class="crayon-h">			</span><span class="crayon-v">iis</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ImageIO</span><span class="crayon-sy">.</span><span class="crayon-e">createImageInputStream</span><span class="crayon-sy">(</span><span class="crayon-st">is</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-69">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-70"><span class="crayon-h">			</span><span class="crayon-c">/*</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-71"><span class="crayon-c">			 * &lt;p&gt;iis:读取源.true:只向前搜索 &lt;/p&gt;.将它标记为 ‘只向前搜索’。</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-72"><span class="crayon-c">			 * 此设置意味着包含在输入源中的图像将只按顺序读取，可能允许 reader 避免缓存包含与以前已经读取的图像关联的数据的那些输入部分。</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-73"><span class="crayon-c">			 */</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-74"><span class="crayon-h">			</span><span class="crayon-v">reader</span><span class="crayon-sy">.</span><span class="crayon-e">setInput</span><span class="crayon-sy">(</span><span class="crayon-v">iis</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-75">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-76"><span class="crayon-h">			</span><span class="crayon-c">/*</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-77"><span class="crayon-c">			 * &lt;p&gt;描述如何对流进行解码的类&lt;p&gt;.用于指定如何在输入时从 Java Image I/O</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-78"><span class="crayon-c">			 * 框架的上下文中的流转换一幅图像或一组图像。用于特定图像格式的插件 将从其 ImageReader 实现的</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-79"><span class="crayon-c">			 * getDefaultReadParam 方法中返回 ImageReadParam 的实例。</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-80"><span class="crayon-c">			 */</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-81"><span class="crayon-h">			</span><span class="crayon-e">ImageReadParam </span><span class="crayon-v">param</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">reader</span><span class="crayon-sy">.</span><span class="crayon-e">getDefaultReadParam</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-82">&nbsp;</div><div class="crayon-line" id="crayon-5df717023de97444200694-83"><span class="crayon-h">			</span><span class="crayon-c">/*</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-84"><span class="crayon-c">			 * 图片裁剪区域。Rectangle 指定了坐标空间中的一个区域，通过 Rectangle 对象</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-85"><span class="crayon-c">			 * 的左上顶点的坐标（x，y）、宽度和高度可以定义这个区域。</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-86"><span class="crayon-c">			 */</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-87"><span class="crayon-h">			</span><span class="crayon-e">Rectangle </span><span class="crayon-v">rect</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Rectangle</span><span class="crayon-sy">(</span><span class="crayon-v">x</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">width</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">height</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-88">&nbsp;</div><div class="crayon-line" id="crayon-5df717023de97444200694-89"><span class="crayon-h">			</span><span class="crayon-c">// 提供一个 BufferedImage，将其用作解码像素数据的目标。</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-90"><span class="crayon-h">			</span><span class="crayon-v">param</span><span class="crayon-sy">.</span><span class="crayon-e">setSourceRegion</span><span class="crayon-sy">(</span><span class="crayon-v">rect</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-91"><span class="crayon-h">			</span><span class="crayon-c">/*</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-92"><span class="crayon-c">			 * 使用所提供的 ImageReadParam 读取通过索引 imageIndex 指定的对象，并将 它作为一个完整的</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-93"><span class="crayon-c">			 * BufferedImage 返回。</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-94"><span class="crayon-c">			 */</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-95"><span class="crayon-h">			</span><span class="crayon-e">BufferedImage </span><span class="crayon-v">bi</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">reader</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">param</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-96"><span class="crayon-h">			</span><span class="crayon-e">File </span><span class="crayon-v">targetFolder</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">File</span><span class="crayon-sy">(</span><span class="crayon-v">subpath</span><span class="crayon-sy">.</span><span class="crayon-e">replaceAll</span><span class="crayon-sy">(</span><span class="crayon-s">"."</span><span class="crayon-o">+</span><span class="crayon-v">postfix</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"/"</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-97"><span class="crayon-h">			</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">!</span><span class="crayon-v">targetFolder</span><span class="crayon-sy">.</span><span class="crayon-e">exists</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-98"><span class="crayon-h">				</span><span class="crayon-v">targetFolder</span><span class="crayon-sy">.</span><span class="crayon-e">mkdirs</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-99"><span class="crayon-h">			</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-100"><span class="crayon-h">			</span><span class="crayon-c">// 保存新图片</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-101"><span class="crayon-h">			</span><span class="crayon-v">ImageIO</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">bi</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">postfix</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">File</span><span class="crayon-sy">(</span><span class="crayon-v">subpath</span><span class="crayon-sy">.</span><span class="crayon-e">replaceAll</span><span class="crayon-sy">(</span><span class="crayon-s">"."</span><span class="crayon-o">+</span><span class="crayon-v">postfix</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">"/"</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">index</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">"."</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">postfix</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-102"><span class="crayon-h">		</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">finally</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-103"><span class="crayon-h">			</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-104"><span class="crayon-h">				</span><span class="crayon-st">is</span><span class="crayon-sy">.</span><span class="crayon-e">close</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-105"><span class="crayon-h">			</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">iis</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-106"><span class="crayon-h">				</span><span class="crayon-v">iis</span><span class="crayon-sy">.</span><span class="crayon-e">close</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023de97444200694-107"><span class="crayon-h">		</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-108">&nbsp;</div><div class="crayon-line" id="crayon-5df717023de97444200694-109"><span class="crayon-h">	</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023de97444200694-110"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0135 seconds] -->
<p>&nbsp;</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5df717023dea4576300461" class="crayon-syntax crayon-theme-tomorrow-night crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
import java.util.HashMap;
import java.util.Map;

public class RectangleCalc {
	public static Map&lt;String, Integer&gt; getRectangles(int width, int height) {

		// 把高度和宽度都变成偶数
		width = width / 2 * 2;
		height = height / 4 * 4;

		int littleWidth = width / 2;
		int littleHeight = height / 4;

		HashMap&lt;String, Integer&gt; rectangles = new HashMap&lt;&gt;();
		int halfX = width / 2;
		int halfY = height / 2;
		int quarterY = height / 4;
		
		
		rectangles.put("1x",0);
		rectangles.put("3x",0);
		rectangles.put("5x",0);
		rectangles.put("7x",0);
		rectangles.put("2x",halfX);
		rectangles.put("4x",halfX);
		rectangles.put("6x",halfX);
		rectangles.put("8x",halfX);
		
		rectangles.put("1y",0);
		rectangles.put("2y",0);
		rectangles.put("3y",quarterY);
		rectangles.put("4y",quarterY);
		rectangles.put("5y",halfY);
		rectangles.put("6y",halfY);
		rectangles.put("7y",halfY+quarterY);
		rectangles.put("8y",halfY+quarterY);

		rectangles.put("littleWidth", littleWidth);
		rectangles.put("littleHeight", littleHeight);

		/// rectangles.put("0", []);
		return rectangles;
	}
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5df717023dea4576300461-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-2">2</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-4">4</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-6">6</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-8">8</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-10">10</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-12">12</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-14">14</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-16">16</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-18">18</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-20">20</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-22">22</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-24">24</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-26">26</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-28">28</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-30">30</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-32">32</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-34">34</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-36">36</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-38">38</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-40">40</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-42">42</div><div class="crayon-num" data-line="crayon-5df717023dea4576300461-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023dea4576300461-44">44</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5df717023dea4576300461-1"><span class="crayon-e">import </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">util</span><span class="crayon-sy">.</span><span class="crayon-v">HashMap</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-2"><span class="crayon-e">import </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">util</span><span class="crayon-sy">.</span><span class="crayon-v">Map</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023dea4576300461-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-4"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">RectangleCalc</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5df717023dea4576300461-5"><span class="crayon-h">	</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-v">Map</span><span class="crayon-o">&lt;</span><span class="crayon-t">String</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">Integer</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">getRectangles</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">width</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">height</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-6">&nbsp;</div><div class="crayon-line" id="crayon-5df717023dea4576300461-7"><span class="crayon-h">		</span><span class="crayon-c">// 把高度和宽度都变成偶数</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-8"><span class="crayon-h">		</span><span class="crayon-v">width</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">width</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023dea4576300461-9"><span class="crayon-h">		</span><span class="crayon-v">height</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">height</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-10">&nbsp;</div><div class="crayon-line" id="crayon-5df717023dea4576300461-11"><span class="crayon-h">		</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">littleWidth</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">width</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-12"><span class="crayon-h">		</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">littleHeight</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">height</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023dea4576300461-13">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-14"><span class="crayon-h">		</span><span class="crayon-v">HashMap</span><span class="crayon-o">&lt;</span><span class="crayon-t">String</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">Integer</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">rectangles</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">HashMap</span><span class="crayon-o">&lt;&gt;</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023dea4576300461-15"><span class="crayon-h">		</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">halfX</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">width</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-16"><span class="crayon-h">		</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">halfY</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">height</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023dea4576300461-17"><span class="crayon-h">		</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">quarterY</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">height</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-18"><span class="crayon-h">		</span></div><div class="crayon-line" id="crayon-5df717023dea4576300461-19"><span class="crayon-h">		</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-20"><span class="crayon-h">		</span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"1x"</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023dea4576300461-21"><span class="crayon-h">		</span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"3x"</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-22"><span class="crayon-h">		</span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"5x"</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023dea4576300461-23"><span class="crayon-h">		</span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"7x"</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-24"><span class="crayon-h">		</span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"2x"</span><span class="crayon-sy">,</span><span class="crayon-v">halfX</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023dea4576300461-25"><span class="crayon-h">		</span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"4x"</span><span class="crayon-sy">,</span><span class="crayon-v">halfX</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-26"><span class="crayon-h">		</span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"6x"</span><span class="crayon-sy">,</span><span class="crayon-v">halfX</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023dea4576300461-27"><span class="crayon-h">		</span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"8x"</span><span class="crayon-sy">,</span><span class="crayon-v">halfX</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-28"><span class="crayon-h">		</span></div><div class="crayon-line" id="crayon-5df717023dea4576300461-29"><span class="crayon-h">		</span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"1y"</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-30"><span class="crayon-h">		</span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"2y"</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023dea4576300461-31"><span class="crayon-h">		</span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"3y"</span><span class="crayon-sy">,</span><span class="crayon-v">quarterY</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-32"><span class="crayon-h">		</span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"4y"</span><span class="crayon-sy">,</span><span class="crayon-v">quarterY</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023dea4576300461-33"><span class="crayon-h">		</span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"5y"</span><span class="crayon-sy">,</span><span class="crayon-v">halfY</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-34"><span class="crayon-h">		</span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"6y"</span><span class="crayon-sy">,</span><span class="crayon-v">halfY</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023dea4576300461-35"><span class="crayon-h">		</span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"7y"</span><span class="crayon-sy">,</span><span class="crayon-v">halfY</span><span class="crayon-o">+</span><span class="crayon-v">quarterY</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-36"><span class="crayon-h">		</span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"8y"</span><span class="crayon-sy">,</span><span class="crayon-v">halfY</span><span class="crayon-o">+</span><span class="crayon-v">quarterY</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023dea4576300461-37">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-38"><span class="crayon-h">		</span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"littleWidth"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">littleWidth</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023dea4576300461-39"><span class="crayon-h">		</span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"littleHeight"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">littleHeight</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-40">&nbsp;</div><div class="crayon-line" id="crayon-5df717023dea4576300461-41"><span class="crayon-h">		</span><span class="crayon-c">/// rectangles.put("0", []);</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-42"><span class="crayon-h">		</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">rectangles</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023dea4576300461-43"><span class="crayon-h">	</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023dea4576300461-44"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0085 seconds] -->
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5df717023deab484852195" class="crayon-syntax crayon-theme-tomorrow-night crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.Map;

import javax.imageio.ImageIO;

public class Cutter {

	public static final String srcPath = "e:/a/";
	public static final String destPath = "e:/b/";

	public static void main(String[] args) {
		File file = new File(srcPath);
		File[] tempList = file.listFiles();
		System.out.println("预计执行个数：" + tempList.length);
		for (int i = 0; i &lt; tempList.length; i++) {
			System.out.println("处理文件：" + tempList[i]);
			BufferedImage bufferedImage;
			try {
				bufferedImage = ImageIO.read(tempList[i]);
				int width = bufferedImage.getWidth();
				int height = bufferedImage.getHeight();
				Map&lt;String, Integer&gt; rectangles = RectangleCalc.getRectangles(width, height);

				for (int j = 1; j &lt;= 8; j++) {

					ImageCutter imageCut = new ImageCutter(rectangles.get(j+"x"), rectangles.get(j+"y"), rectangles.get("littleWidth"), rectangles.get("littleHeight"));
					imageCut.cut(tempList[i].getPath(), destPath + tempList[i].getName(), j);
				}

			} catch (IOException e) {
				e.printStackTrace();
			}

		}
	}
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5df717023deab484852195-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023deab484852195-2">2</div><div class="crayon-num" data-line="crayon-5df717023deab484852195-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023deab484852195-4">4</div><div class="crayon-num" data-line="crayon-5df717023deab484852195-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023deab484852195-6">6</div><div class="crayon-num" data-line="crayon-5df717023deab484852195-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023deab484852195-8">8</div><div class="crayon-num" data-line="crayon-5df717023deab484852195-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023deab484852195-10">10</div><div class="crayon-num" data-line="crayon-5df717023deab484852195-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023deab484852195-12">12</div><div class="crayon-num" data-line="crayon-5df717023deab484852195-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023deab484852195-14">14</div><div class="crayon-num" data-line="crayon-5df717023deab484852195-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023deab484852195-16">16</div><div class="crayon-num" data-line="crayon-5df717023deab484852195-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023deab484852195-18">18</div><div class="crayon-num" data-line="crayon-5df717023deab484852195-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023deab484852195-20">20</div><div class="crayon-num" data-line="crayon-5df717023deab484852195-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023deab484852195-22">22</div><div class="crayon-num" data-line="crayon-5df717023deab484852195-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023deab484852195-24">24</div><div class="crayon-num" data-line="crayon-5df717023deab484852195-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023deab484852195-26">26</div><div class="crayon-num" data-line="crayon-5df717023deab484852195-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023deab484852195-28">28</div><div class="crayon-num" data-line="crayon-5df717023deab484852195-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023deab484852195-30">30</div><div class="crayon-num" data-line="crayon-5df717023deab484852195-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023deab484852195-32">32</div><div class="crayon-num" data-line="crayon-5df717023deab484852195-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023deab484852195-34">34</div><div class="crayon-num" data-line="crayon-5df717023deab484852195-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023deab484852195-36">36</div><div class="crayon-num" data-line="crayon-5df717023deab484852195-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023deab484852195-38">38</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5df717023deab484852195-1"><span class="crayon-e">import </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">awt</span><span class="crayon-sy">.</span><span class="crayon-v">image</span><span class="crayon-sy">.</span><span class="crayon-v">BufferedImage</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023deab484852195-2"><span class="crayon-e">import </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">io</span><span class="crayon-sy">.</span><span class="crayon-v">File</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023deab484852195-3"><span class="crayon-e">import </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">io</span><span class="crayon-sy">.</span><span class="crayon-v">IOException</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023deab484852195-4"><span class="crayon-e">import </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">util</span><span class="crayon-sy">.</span><span class="crayon-v">Map</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023deab484852195-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023deab484852195-6"><span class="crayon-e">import </span><span class="crayon-v">javax</span><span class="crayon-sy">.</span><span class="crayon-v">imageio</span><span class="crayon-sy">.</span><span class="crayon-v">ImageIO</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023deab484852195-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023deab484852195-8"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Cutter</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5df717023deab484852195-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023deab484852195-10"><span class="crayon-h">	</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">srcPath</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"e:/a/"</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023deab484852195-11"><span class="crayon-h">	</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">destPath</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"e:/b/"</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023deab484852195-12">&nbsp;</div><div class="crayon-line" id="crayon-5df717023deab484852195-13"><span class="crayon-h">	</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">args</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023deab484852195-14"><span class="crayon-h">		</span><span class="crayon-e">File </span><span class="crayon-v">file</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">File</span><span class="crayon-sy">(</span><span class="crayon-v">srcPath</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023deab484852195-15"><span class="crayon-h">		</span><span class="crayon-v">File</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">tempList</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">file</span><span class="crayon-sy">.</span><span class="crayon-e">listFiles</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023deab484852195-16"><span class="crayon-h">		</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">out</span><span class="crayon-sy">.</span><span class="crayon-e">println</span><span class="crayon-sy">(</span><span class="crayon-s">"预计执行个数："</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">tempList</span><span class="crayon-sy">.</span><span class="crayon-v">length</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023deab484852195-17"><span class="crayon-h">		</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">tempList</span><span class="crayon-sy">.</span><span class="crayon-v">length</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-o">++</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023deab484852195-18"><span class="crayon-h">			</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">out</span><span class="crayon-sy">.</span><span class="crayon-e">println</span><span class="crayon-sy">(</span><span class="crayon-s">"处理文件："</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">tempList</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023deab484852195-19"><span class="crayon-h">			</span><span class="crayon-e">BufferedImage </span><span class="crayon-v">bufferedImage</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023deab484852195-20"><span class="crayon-h">			</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5df717023deab484852195-21"><span class="crayon-h">				</span><span class="crayon-v">bufferedImage</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ImageIO</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-v">tempList</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023deab484852195-22"><span class="crayon-h">				</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">width</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">bufferedImage</span><span class="crayon-sy">.</span><span class="crayon-e">getWidth</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023deab484852195-23"><span class="crayon-h">				</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">height</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">bufferedImage</span><span class="crayon-sy">.</span><span class="crayon-e">getHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023deab484852195-24"><span class="crayon-h">				</span><span class="crayon-v">Map</span><span class="crayon-o">&lt;</span><span class="crayon-t">String</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">Integer</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">rectangles</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">RectangleCalc</span><span class="crayon-sy">.</span><span class="crayon-e">getRectangles</span><span class="crayon-sy">(</span><span class="crayon-v">width</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">height</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023deab484852195-25">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023deab484852195-26"><span class="crayon-h">				</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">j</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">j</span><span class="crayon-h"> </span><span class="crayon-o">&lt;=</span><span class="crayon-h"> </span><span class="crayon-cn">8</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">j</span><span class="crayon-o">++</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5df717023deab484852195-27">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023deab484852195-28"><span class="crayon-h">					</span><span class="crayon-e">ImageCutter </span><span class="crayon-v">imageCut</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">ImageCutter</span><span class="crayon-sy">(</span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-v">j</span><span class="crayon-o">+</span><span class="crayon-s">"x"</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-v">j</span><span class="crayon-o">+</span><span class="crayon-s">"y"</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-s">"littleWidth"</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">rectangles</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-s">"littleHeight"</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5df717023deab484852195-29"><span class="crayon-h">					</span><span class="crayon-v">imageCut</span><span class="crayon-sy">.</span><span class="crayon-e">cut</span><span class="crayon-sy">(</span><span class="crayon-v">tempList</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">getPath</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">destPath</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">tempList</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">getName</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">j</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023deab484852195-30"><span class="crayon-h">				</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5df717023deab484852195-31">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023deab484852195-32"><span class="crayon-h">			</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">IOException</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5df717023deab484852195-33"><span class="crayon-h">				</span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-e">printStackTrace</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023deab484852195-34"><span class="crayon-h">			</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5df717023deab484852195-35">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023deab484852195-36"><span class="crayon-h">		</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5df717023deab484852195-37"><span class="crayon-h">	</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023deab484852195-38"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0091 seconds] -->
<p>&nbsp;</p>
    </div>
  </div>
</article>
          <article data-page="5" class="post-255 post type-post status-publish format-status hentry category-uncategorized post_format-post-format-status dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">状态</div>
    <header>
      <h2 class="entry-title"><a href="/archives/255.html">昨晚加班到九点，把公司的网络进行了切换，整体质量和管控都得到提升，今早看到一切顺利，全部同事能上网，舒畅！</a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/255.html"><time class="published" datetime="2017-03-31T10:22:21+00:00">2017年3月31日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/uncategorized" rel="category tag">技术总结分享</a></span>
</div>
    </header>
    <div class="entry-content">
          </div>
  </div>
</article>
          <article data-page="5" class="post-252 post type-post status-publish format-standard hentry category-uncategorized dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">标准</div>
    <header>
      <h2 class="entry-title"><a href="/archives/252.html">Maven打包动态替换配置文件变量的问题，在eclipse中发布失效的问题</a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/252.html"><time class="published" datetime="2017-03-30T09:59:04+00:00">2017年3月30日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/uncategorized" rel="category tag">技术总结分享</a></span>
</div>
    </header>
    <div class="entry-content">
      <p>在开发过程中，在&#8221;开发&#8221;，&#8221;仿真&#8221;，&#8221;正式部署&#8221;三种环境中，往往数据库配置，日志输出配置等都会不同，如果每次都手动改，显然不够优雅，Maven自带的工具可以解决这一问题，可以参考这里。</p>
<p>http://blog.csdn.net/xiao_jun_0820/article/details/49864285</p>
<p>但是，在eclipse中会发现这一配置无法奏效，查找原因浪费了一点时间。</p>
<p>总结一下：</p>
<p>1，先要确认发布到eclipse的代码是maven替换配置文件后的代码，eclipse自带的tomcat的发布路径是：  .metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps</p>
<p>2，如果发现，配置文件里的类似于${jdbc.url}的字符串没有被替换掉，那就是eclipse的配置出问题了，需要确认改动两个地方：</p>
<ul>
<li>web项目的java编译代码的路径。在项目上点右键&#8211;properties&#8211;java build pah&#8211;default output folder 设置成 project name/target/classes</li>
<li>web项目的deploy 路径改动。在项目上点右键&#8211;properties&#8211;deployment assembly &#8212; 设置成如下的结构<a href="/wp-content/uploads/2017/03/a.png"><img class="alignnone size-full wp-image-253" src="/wp-content/uploads/2017/03/a.png" alt="" width="741" height="263" srcset="/wp-content/uploads/2017/03/a.png 741w, /wp-content/uploads/2017/03/a-300x106.png 300w" sizes="(max-width: 741px) 100vw, 741px" /></a></li>
</ul>
<p>&nbsp;</p>
<p>这样就基本能保证maven编译替换的文件能及时的部署到自带的tomcat中去。</p>
    </div>
  </div>
</article>
          <article data-page="5" class="post-249 post type-post status-publish format-standard hentry category-uncategorized dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">标准</div>
    <header>
      <h2 class="entry-title"><a href="/archives/249.html">利用Shell脚本给微信企业号里定时推送消息</a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/249.html"><time class="published" datetime="2017-03-29T10:06:25+00:00">2017年3月29日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/uncategorized" rel="category tag">技术总结分享</a></span>
</div>
    </header>
    <div class="entry-content">
      <p>进去企业号https://qy.weixin.qq.com</p>
<p>应用中心&#8211;新建应用&#8211;消息性应用&#8211;添加LOGO&#8211;填入名称和介绍&#8211;选择一个可见范围（建议选最大组织）。</p>
<p>点开应用查看应用的ID。</p>
<p>&nbsp;</p>
<p>打开设置&#8211;权限管理&#8211;查看CorpID和Secret。</p>
<p>通讯录&#8211;点击&#8221;最高级别组织&#8221;右边的三角号&#8211;修改部门&#8211;查看部门id.</p>
<p>&nbsp;</p>
<p>shell脚本：</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5df717023e539315011174" class="crayon-syntax crayon-theme-tomorrow-night crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
#!/bin/sh

URL_GET_TOKEN="https://qyapi.weixin.qq.com/cgi-bin/gettoken"
URL_SEND_MSG="https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token="
CORP_ID="wx72800000000000"
SECRET="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
#部门ID
TOPARTY=1
#应用ID
AGENTID=92

MSG='{'
MSG=$MSG'"toparty":"'$TOPARTY'",'
MSG=$MSG'"text":{"content":"'同学们，请及时提交今日日报！'"},'
MSG=$MSG'"safe":"0",'
MSG=$MSG'"agentid":'$AGENTID','
MSG=$MSG'"msgtype":"text"'
MSG=$MSG'}'

TOKEN=$(curl -s "$URL_GET_TOKEN?corpid=$CORP_ID&amp;corpsecret=$SECRET" | jq -r .access_token)

if [ -z $TOKEN ]; then
    echo Get token error, maybe network issue
    exit 100
fi
echo $MSG
return=$(curl -s -X POST -d "$MSG" $URL_SEND_MSG$TOKEN)

if [ -z "$return" ]; then
    echo Send msg error, maybe network issue
    exit 101
else
    errcode=$(echo $return | jq -r .errcode)
    if [[ $errcode -ne 0 ]]; then
        errmsg=$(echo $return | jq -r .errmsg)
        echo Send msg error, with error $errcode: $errmsg
        exit 102
    else
        echo ok
    fi
fi</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5df717023e539315011174-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-2">2</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-4">4</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-6">6</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-8">8</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-10">10</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-12">12</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-14">14</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-16">16</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-18">18</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-20">20</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-22">22</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-24">24</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-26">26</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-28">28</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-30">30</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-32">32</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-34">34</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-36">36</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-38">38</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df717023e539315011174-40">40</div><div class="crayon-num" data-line="crayon-5df717023e539315011174-41">41</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5df717023e539315011174-1"><span class="crayon-p">#!/bin/sh</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-2">&nbsp;</div><div class="crayon-line" id="crayon-5df717023e539315011174-3"><span class="crayon-v">URL_GET_TOKEN</span><span class="crayon-o">=</span><span class="crayon-s">"https://qyapi.weixin.qq.com/cgi-bin/gettoken"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-4"><span class="crayon-v">URL_SEND_MSG</span><span class="crayon-o">=</span><span class="crayon-s">"https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token="</span></div><div class="crayon-line" id="crayon-5df717023e539315011174-5"><span class="crayon-v">CORP_ID</span><span class="crayon-o">=</span><span class="crayon-s">"wx72800000000000"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-6"><span class="crayon-v">SECRET</span><span class="crayon-o">=</span><span class="crayon-s">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span></div><div class="crayon-line" id="crayon-5df717023e539315011174-7"><span class="crayon-c">#部门ID</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-8"><span class="crayon-v">TOPARTY</span><span class="crayon-o">=</span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-5df717023e539315011174-9"><span class="crayon-c">#应用ID</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-10"><span class="crayon-v">AGENTID</span><span class="crayon-o">=</span><span class="crayon-cn">92</span></div><div class="crayon-line" id="crayon-5df717023e539315011174-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-12"><span class="crayon-v">MSG</span><span class="crayon-o">=</span><span class="crayon-s">'{'</span></div><div class="crayon-line" id="crayon-5df717023e539315011174-13"><span class="crayon-v">MSG</span><span class="crayon-o">=</span><span class="crayon-v">$MSG</span><span class="crayon-s">'"toparty":"'</span><span class="crayon-v">$TOPARTY</span><span class="crayon-s">'",'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-14"><span class="crayon-v">MSG</span><span class="crayon-o">=</span><span class="crayon-v">$MSG</span><span class="crayon-s">'"text":{"content":"'</span>同学们，请及时提交今日日报！<span class="crayon-s">'"},'</span></div><div class="crayon-line" id="crayon-5df717023e539315011174-15"><span class="crayon-v">MSG</span><span class="crayon-o">=</span><span class="crayon-v">$MSG</span><span class="crayon-s">'"safe":"0",'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-16"><span class="crayon-v">MSG</span><span class="crayon-o">=</span><span class="crayon-v">$MSG</span><span class="crayon-s">'"agentid":'</span><span class="crayon-v">$AGENTID</span><span class="crayon-s">','</span></div><div class="crayon-line" id="crayon-5df717023e539315011174-17"><span class="crayon-v">MSG</span><span class="crayon-o">=</span><span class="crayon-v">$MSG</span><span class="crayon-s">'"msgtype":"text"'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-18"><span class="crayon-v">MSG</span><span class="crayon-o">=</span><span class="crayon-v">$MSG</span><span class="crayon-s">'}'</span></div><div class="crayon-line" id="crayon-5df717023e539315011174-19">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-20"><span class="crayon-v">TOKEN</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">(</span><span class="crayon-v">curl</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-s">"$URL_GET_TOKEN?corpid=$CORP_ID&amp;corpsecret=$SECRET"</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">jq</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-h"> </span><span class="crayon-e">.access_token</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5df717023e539315011174-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-22"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">z</span><span class="crayon-h"> </span><span class="crayon-v">$TOKEN</span><span class="crayon-h"> </span><span class="crayon-sy">]</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line" id="crayon-5df717023e539315011174-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">echo</span><span class="crayon-h"> </span><span class="crayon-r">Get</span><span class="crayon-h"> </span><span class="crayon-e">token </span><span class="crayon-v">error</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">maybe </span><span class="crayon-e">network </span><span class="crayon-e">issue</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-24"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">exit</span><span class="crayon-h"> </span><span class="crayon-cn">100</span></div><div class="crayon-line" id="crayon-5df717023e539315011174-25"><span class="crayon-st">fi</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-26"><span class="crayon-r">echo</span><span class="crayon-h"> </span><span class="crayon-v">$MSG</span></div><div class="crayon-line" id="crayon-5df717023e539315011174-27"><span class="crayon-st">return</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">(</span><span class="crayon-v">curl</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">s</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">X</span><span class="crayon-h"> </span><span class="crayon-v">POST</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">d</span><span class="crayon-h"> </span><span class="crayon-s">"$MSG"</span><span class="crayon-h"> </span><span class="crayon-v">$URL_SEND_MSG</span><span class="crayon-v">$TOKEN</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-28">&nbsp;</div><div class="crayon-line" id="crayon-5df717023e539315011174-29"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">z</span><span class="crayon-h"> </span><span class="crayon-s">"$return"</span><span class="crayon-h"> </span><span class="crayon-sy">]</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">echo</span><span class="crayon-h"> </span><span class="crayon-e">Send </span><span class="crayon-e">msg </span><span class="crayon-v">error</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">maybe </span><span class="crayon-e">network </span><span class="crayon-e">issue</span></div><div class="crayon-line" id="crayon-5df717023e539315011174-31"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">exit</span><span class="crayon-h"> </span><span class="crayon-cn">101</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-32"><span class="crayon-st">else</span></div><div class="crayon-line" id="crayon-5df717023e539315011174-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">errcode</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">(</span><span class="crayon-r">echo</span><span class="crayon-h"> </span><span class="crayon-v">$return</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">jq</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-h"> </span><span class="crayon-e">.errcode</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">[</span><span class="crayon-h"> </span><span class="crayon-v">$errcode</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">ne</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-sy">]</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line" id="crayon-5df717023e539315011174-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">errmsg</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">(</span><span class="crayon-r">echo</span><span class="crayon-h"> </span><span class="crayon-v">$return</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">jq</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-h"> </span><span class="crayon-e">.errmsg</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">echo</span><span class="crayon-h"> </span><span class="crayon-e">Send </span><span class="crayon-e">msg </span><span class="crayon-v">error</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">with </span><span class="crayon-i">error</span><span class="crayon-h"> </span><span class="crayon-v">$errcode</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">$errmsg</span></div><div class="crayon-line" id="crayon-5df717023e539315011174-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">exit</span><span class="crayon-h"> </span><span class="crayon-cn">102</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span></div><div class="crayon-line" id="crayon-5df717023e539315011174-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">echo</span><span class="crayon-h"> </span><span class="crayon-e">ok</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df717023e539315011174-40"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">fi</span></div><div class="crayon-line" id="crayon-5df717023e539315011174-41"><span class="crayon-st">fi</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0062 seconds] -->
<p>&nbsp;</p>
<p>加入定时器crontab里定时执行脚本，就可以每天通过企业号应用进行通知了。</p>
<p>最终的效果：</p>
<p><a href="/wp-content/uploads/2017/03/微信图片_20170329100436.jpg" rel="attachment wp-att-250"><img class="alignnone  wp-image-250" src="/wp-content/uploads/2017/03/微信图片_20170329100436.jpg" alt="微信图片_20170329100436" width="283" height="503" srcset="/wp-content/uploads/2017/03/微信图片_20170329100436.jpg 720w, /wp-content/uploads/2017/03/微信图片_20170329100436-169x300.jpg 169w, /wp-content/uploads/2017/03/微信图片_20170329100436-576x1024.jpg 576w" sizes="(max-width: 283px) 100vw, 283px" /></a></p>
<p>&nbsp;</p>
    </div>
  </div>
</article>
    
          <nav class="post-nav">
        <ul class="pager">
          <li class="previous"><a href="/archives/category/uncategorized/page/6" >&larr; Older posts</a></li>
          <li class="next"><a href="/archives/category/uncategorized/page/4" >Newer posts &rarr;</a></li>
        </ul>
      </nav>
      </div>      </main>
    </div>
  </div>
  <div class="bottom-info">
<div style="font-size: 12px;text-align: center;padding:28px 0 0 0">@娱乐性质的个人Blog，技术文章居多，偶发性会有深思文，请谨慎关注，随意转发，如果可以请把出处写上
</div>
<div style="font-size: 10px;text-align: center;padding:5px 0 0 0">联系我，个人微博，Twitter，FaceBook等等各种账号，请@tiaobug，Email: i@tiaobug.com
</div>
<div style="font-size: 12px;text-align: center;padding:5px 0 12px 0 ">鲁ICP备17013530号
</div>
</div><script type='text/javascript' src='/wp-content/themes/dw-timeline/assets/js/vendor/jquery.infinitescroll.min.js?ver=4.8.12'></script>
<script type='text/javascript' src='/wp-content/themes/dw-timeline/assets/js/vendor/bootstrap-3.0.3.min.js?ver=4.8.12'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var dwtl = {"template_directory_uri":"http:\/\/www.tiaobug.com\/wp-content\/themes\/dw-timeline"};
var infinitescroll = {"page":"page","the_end":"the end"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/themes/dw-timeline/assets/js/scripts.js?ver=4.8.12'></script>
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.8.12'></script>

</body>
</html>
