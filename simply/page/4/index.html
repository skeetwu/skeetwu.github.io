<!DOCTYPE html>
<html class="no-js" lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>攻城狮小武</title>
  <meta name="viewport" content="width=1430, initial-scale=1">

  <link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="攻城狮小武 &raquo; Feed" href="/feed" />
<link rel="alternate" type="application/rss+xml" title="攻城狮小武 &raquo; 评论Feed" href="/comments/feed" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/www.tiaobug.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.8.12"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,56826,8203,55356,56819),0,0),c=j.toDataURL(),b!==c&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55358,56794,8205,9794,65039),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55358,56794,8203,9794,65039),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='crayon-css'  href='/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-tomorrow-night-css'  href='/wp-content/plugins/crayon-syntax-highlighter/themes/tomorrow-night/tomorrow-night.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='dw_timeline_main-css'  href='/wp-content/themes/dw-timeline/assets/css/main.css?ver=6c39f42987ae297a5a21e2bb35bf3402' type='text/css' media='all' />
<link rel='stylesheet' id='dw_timeline_style-css'  href='/wp-content/themes/dw-timeline/style.css?ver=c1a58eb4baaf24c3771085df3d54ff8d' type='text/css' media='all' />
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/www.tiaobug.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=_2.7.2_beta'></script>
<script type='text/javascript' src='/wp-content/themes/dw-timeline/assets/js/vendor/modernizr-2.7.0.min.js'></script>
<script type='text/javascript' src='/wp-content/themes/dw-timeline/assets/js/vendor/nivo-lightbox.min.js'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.8.12" />
<link rel="shortcut icon" href="/wp-content/uploads/2017/12/WP3-副本.jpg">    <style>
    
        
    
          .banner hgroup:after {
        background: none;
      }   
    
    </style>    
    <link rel="icon" href="/wp-content/uploads/2017/12/cropped-WP3-副本-32x32.jpg" sizes="32x32" />
<link rel="icon" href="/wp-content/uploads/2017/12/cropped-WP3-副本-192x192.jpg" sizes="192x192" />
<link rel="apple-touch-icon-precomposed" href="/wp-content/uploads/2017/12/cropped-WP3-副本-180x180.jpg" />
<meta name="msapplication-TileImage" content="http://www.tiaobug.com/wp-content/uploads/2017/12/cropped-WP3-副本-270x270.jpg" />
		<style type="text/css" id="wp-custom-css">
			/*
您可以在此处加入您的CSS。

点击上方的帮助图标来了解更多。
*/
.wrap {
    padding-bottom: 100px;
}
.bottom-info{
    clear: both;
    position: fixed;
    bottom: 0px;
    background-color: #e5e5e5;
    z-index: 1000;
    text-align: center;
    width: 100%;
}		</style>
	  <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?d68c66f0010a97131e967e4bab927275";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
</head>
<body class="home blog paged paged-4">
    
<header class="banner cover" role="banner">
  <div class="header-inner">
      <nav class="nav-main" role="navigation">
        <div class="container">
                </div>
      </nav>
              <hgroup>
          <div class="container">
            <h1 class="page-title" style="border:0px">
              <a href="/contactme">攻城狮小武</a>
            </h1>
            <h2 class="page-description">tiaobug.com</h2>
            <button id="get-started" class="btn btn-default btn-coner">来都来了，瞅两眼吧！</button>
          </div>
        </hgroup>
        </div>
</header>  <div class="wrap container" role="document">
    <div class="content row">
      <main class="main col-sm-12" role="main">
        <div class="timeline two-col">
  <div data-page="1" class="timeline-pale dwtl full"><span>Page 1</span></div>
      <div class="timeline-scrubber"><ul><li  class="active"  data-page="1"><a href="#" >Page 1</a></li><li  data-page="2"><a href="#" >Page 2</a></li><li  data-page="3"><a href="#" >Page 3</a></li><li  data-page="4"><a href="#" >Page 4</a></li><li  data-page="5"><a href="#" >Page 5</a></li><li  data-page="6"><a href="#" >Page 6</a></li><li  data-page="7"><a href="#" >Page 7</a></li><li  data-page="8"><a href="#" >Page 8</a></li><li  data-page="9"><a href="#" >Page 9</a></li><li  data-page="10"><a href="#" >Page 10</a></li></ul></div>          <article data-page="4" class="post-333 post type-post status-publish format-standard hentry category-uncategorized dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">标准</div>
    <header>
      <h2 class="entry-title"><a href="/archives/333.html">Maven项目使用profile自动替换项目中的resource的时候，如何正常使用eclipse的tomcat发布</a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/333.html"><time class="published" datetime="2017-11-15T11:53:16+00:00">2017年11月15日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/uncategorized" rel="category tag">技术总结分享</a></span>
</div>
    </header>
    <div class="entry-content">
      <p>一般情况下，我们会把多个web项目集中到一个maven项目中，比如下图的结构：</p>
<p>iuuplatform是整个maven项目，其中iuuscenicadmin(景区管理平台)，iuuwebservice(接口)，iuusuperadmin(超管平台)是三个war项目，其他的模块都是公用模块，供三个web项目调用。</p>
<p><a href="/wp-content/uploads/2017/11/1.png"><img class="alignnone size-full wp-image-334" src="/wp-content/uploads/2017/11/1.png" alt="" width="296" height="213" /></a></p>
<p>同时，为了适应多种发布环境，maven提供了resource的文件配置文件参数自动替换，具体这块的功能请参考：</p>
<p>https://www.cnblogs.com/pixy/p/4798089.html</p>
<p>按照上述文章的内容，就可以实现根据不同的profile配置不同的properties文件了。</p>
<p>&nbsp;</p>
<p>但是上述的配置带来了一个很严重的问题，properties文件中必须是类似下面的配置</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5df716d6c628b646875481" class="crayon-syntax crayon-theme-tomorrow-night crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
jest.urls=${jest.urls}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5df716d6c628b646875481-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5df716d6c628b646875481-1"><span class="crayon-v">jest</span><span class="crayon-sy">.</span><span class="crayon-v">urls</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">jest</span><span class="crayon-sy">.</span><span class="crayon-v">urls</span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
<p>也就是说这个配置在系统中是不能直接使用的，所以<span style="color: #ff0000;"><strong>每次启动就必须使用maven tomcatX:run命令才能启动，而不能直接是用eclipse的部署进行启动测试</strong></span>。</p>
<p>这样就无形中浪费了很多次的编译时间，打包时间和启动时间，也无法使用热部署工具直接操作tomcat。</p>
<p>所以，为了解决这个问题，又不放弃原有的properties替换功能，研究好长时间总算找到办法解决了这个问题，具体的思路入下：</p>
<p>1，目前的部署环境分为三类：开发，仿真和生成环境，直接把配置文件按照开发环境进行配置。</p>
<p>2，另外复制两份配置文件，一份为仿真环境配置，一份为生成环境配置。</p>
<p>3，去除maven pom.xml中的profile里的jdbc等配置，只留下一个变量配置，用于定义环境变量profiles.activation。</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5df716d6c6297228876478" class="crayon-syntax crayon-theme-tomorrow-night crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">XHTML</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
		&lt;!-- iuuwebservice --&gt;
		&lt;profile&gt;
			&lt;id&gt;dev-iuuwebservice&lt;/id&gt;
			&lt;properties&gt;
				&lt;profiles.activation&gt;a_conf_dev_iuuwebservice&lt;/profiles.activation&gt;
			&lt;/properties&gt;
			&lt;modules&gt;
				&lt;module&gt;iuuwebservice&lt;/module&gt;
			&lt;/modules&gt;
		&lt;/profile&gt;
		&lt;profile&gt;
			&lt;id&gt;ali-test-iuuwebservice&lt;/id&gt;
			&lt;properties&gt;
				&lt;profiles.activation&gt;a_conf_sim_iuuwebservice&lt;/profiles.activation&gt;
			&lt;/properties&gt;
			&lt;modules&gt;
				&lt;module&gt;iuuwebservice&lt;/module&gt;
			&lt;/modules&gt;
		&lt;/profile&gt;
		&lt;profile&gt;
			&lt;id&gt;ali-iuuwebservice&lt;/id&gt;
			&lt;properties&gt;
				&lt;profiles.activation&gt;a_conf_offical_iuuwebservice&lt;/profiles.activation&gt;
			&lt;/properties&gt;
			&lt;modules&gt;
				&lt;module&gt;iuuwebservice&lt;/module&gt;
			&lt;/modules&gt;
		&lt;/profile&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5df716d6c6297228876478-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c6297228876478-2">2</div><div class="crayon-num" data-line="crayon-5df716d6c6297228876478-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c6297228876478-4">4</div><div class="crayon-num" data-line="crayon-5df716d6c6297228876478-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c6297228876478-6">6</div><div class="crayon-num" data-line="crayon-5df716d6c6297228876478-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c6297228876478-8">8</div><div class="crayon-num" data-line="crayon-5df716d6c6297228876478-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c6297228876478-10">10</div><div class="crayon-num" data-line="crayon-5df716d6c6297228876478-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c6297228876478-12">12</div><div class="crayon-num" data-line="crayon-5df716d6c6297228876478-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c6297228876478-14">14</div><div class="crayon-num" data-line="crayon-5df716d6c6297228876478-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c6297228876478-16">16</div><div class="crayon-num" data-line="crayon-5df716d6c6297228876478-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c6297228876478-18">18</div><div class="crayon-num" data-line="crayon-5df716d6c6297228876478-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c6297228876478-20">20</div><div class="crayon-num" data-line="crayon-5df716d6c6297228876478-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c6297228876478-22">22</div><div class="crayon-num" data-line="crayon-5df716d6c6297228876478-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c6297228876478-24">24</div><div class="crayon-num" data-line="crayon-5df716d6c6297228876478-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c6297228876478-26">26</div><div class="crayon-num" data-line="crayon-5df716d6c6297228876478-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c6297228876478-28">28</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5df716d6c6297228876478-1"><span class="crayon-h">		</span><span class="crayon-c">&lt;!-- iuuwebservice --&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c6297228876478-2"><span class="crayon-i">		</span><span class="crayon-r">&lt;profile&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c6297228876478-3"><span class="crayon-i">			</span><span class="crayon-r">&lt;id&gt;</span><span class="crayon-i">dev-iuuwebservice</span><span class="crayon-r">&lt;/id&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c6297228876478-4"><span class="crayon-i">			</span><span class="crayon-r">&lt;properties&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c6297228876478-5"><span class="crayon-i">				</span><span class="crayon-r">&lt;profiles.activation&gt;</span><span class="crayon-i">a_conf_dev_iuuwebservice</span><span class="crayon-r">&lt;/profiles.activation&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c6297228876478-6"><span class="crayon-i">			</span><span class="crayon-r">&lt;/properties&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c6297228876478-7"><span class="crayon-i">			</span><span class="crayon-r">&lt;modules&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c6297228876478-8"><span class="crayon-i">				</span><span class="crayon-r">&lt;module&gt;</span><span class="crayon-i">iuuwebservice</span><span class="crayon-r">&lt;/module&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c6297228876478-9"><span class="crayon-i">			</span><span class="crayon-r">&lt;/modules&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c6297228876478-10"><span class="crayon-i">		</span><span class="crayon-r">&lt;/profile&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c6297228876478-11"><span class="crayon-i">		</span><span class="crayon-r">&lt;profile&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c6297228876478-12"><span class="crayon-i">			</span><span class="crayon-r">&lt;id&gt;</span><span class="crayon-i">ali-test-iuuwebservice</span><span class="crayon-r">&lt;/id&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c6297228876478-13"><span class="crayon-i">			</span><span class="crayon-r">&lt;properties&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c6297228876478-14"><span class="crayon-i">				</span><span class="crayon-r">&lt;profiles.activation&gt;</span><span class="crayon-i">a_conf_sim_iuuwebservice</span><span class="crayon-r">&lt;/profiles.activation&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c6297228876478-15"><span class="crayon-i">			</span><span class="crayon-r">&lt;/properties&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c6297228876478-16"><span class="crayon-i">			</span><span class="crayon-r">&lt;modules&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c6297228876478-17"><span class="crayon-i">				</span><span class="crayon-r">&lt;module&gt;</span><span class="crayon-i">iuuwebservice</span><span class="crayon-r">&lt;/module&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c6297228876478-18"><span class="crayon-i">			</span><span class="crayon-r">&lt;/modules&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c6297228876478-19"><span class="crayon-i">		</span><span class="crayon-r">&lt;/profile&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c6297228876478-20"><span class="crayon-i">		</span><span class="crayon-r">&lt;profile&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c6297228876478-21"><span class="crayon-i">			</span><span class="crayon-r">&lt;id&gt;</span><span class="crayon-i">ali-iuuwebservice</span><span class="crayon-r">&lt;/id&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c6297228876478-22"><span class="crayon-i">			</span><span class="crayon-r">&lt;properties&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c6297228876478-23"><span class="crayon-i">				</span><span class="crayon-r">&lt;profiles.activation&gt;</span><span class="crayon-i">a_conf_offical_iuuwebservice</span><span class="crayon-r">&lt;/profiles.activation&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c6297228876478-24"><span class="crayon-i">			</span><span class="crayon-r">&lt;/properties&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c6297228876478-25"><span class="crayon-i">			</span><span class="crayon-r">&lt;modules&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c6297228876478-26"><span class="crayon-i">				</span><span class="crayon-r">&lt;module&gt;</span><span class="crayon-i">iuuwebservice</span><span class="crayon-r">&lt;/module&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c6297228876478-27"><span class="crayon-i">			</span><span class="crayon-r">&lt;/modules&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c6297228876478-28"><span class="crayon-i">		</span><span class="crayon-r">&lt;/profile&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0019 seconds] -->
<p>4， 定义web项目的 resource目录，先去除所有的配置文件，然后再根据环境变量profile.activation进行配置文件的添加。</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5df716d6c629d770757027" class="crayon-syntax crayon-theme-tomorrow-night crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">XHTML</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
		&lt;resources&gt;
			&lt;resource&gt;
				&lt;directory&gt;src/main/resources&lt;/directory&gt;
				&lt;includes&gt;  
		            &lt;include&gt;**/*.properties&lt;/include&gt;  
		            &lt;include&gt;**/*.xml&lt;/include&gt;  
		            &lt;include&gt;**/*.p12&lt;/include&gt;  
		            &lt;include&gt;**/*.txt&lt;/include&gt;  
		        &lt;/includes&gt; 
				&lt;excludes&gt;
					&lt;exclude&gt;a_conf*/*/*&lt;/exclude&gt;
					&lt;exclude&gt;a_conf*/*&lt;/exclude&gt;
				&lt;/excludes&gt;
			&lt;/resource&gt;
			&lt;resource&gt;
				&lt;directory&gt;src/main/resources&lt;/directory&gt;
				&lt;!-- 包含，若没有指定则默认为 activeByDefault 标签定义的profile --&gt;
				&lt;includes&gt;
					&lt;include&gt;${profiles.activation}/*&lt;/include&gt;
					&lt;include&gt;${profiles.activation}/*/**&lt;/include&gt;
				&lt;/includes&gt;
			&lt;/resource&gt;  
		&lt;/resources&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5df716d6c629d770757027-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c629d770757027-2">2</div><div class="crayon-num" data-line="crayon-5df716d6c629d770757027-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c629d770757027-4">4</div><div class="crayon-num" data-line="crayon-5df716d6c629d770757027-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c629d770757027-6">6</div><div class="crayon-num" data-line="crayon-5df716d6c629d770757027-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c629d770757027-8">8</div><div class="crayon-num" data-line="crayon-5df716d6c629d770757027-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c629d770757027-10">10</div><div class="crayon-num" data-line="crayon-5df716d6c629d770757027-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c629d770757027-12">12</div><div class="crayon-num" data-line="crayon-5df716d6c629d770757027-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c629d770757027-14">14</div><div class="crayon-num" data-line="crayon-5df716d6c629d770757027-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c629d770757027-16">16</div><div class="crayon-num" data-line="crayon-5df716d6c629d770757027-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c629d770757027-18">18</div><div class="crayon-num" data-line="crayon-5df716d6c629d770757027-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c629d770757027-20">20</div><div class="crayon-num" data-line="crayon-5df716d6c629d770757027-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c629d770757027-22">22</div><div class="crayon-num" data-line="crayon-5df716d6c629d770757027-23">23</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5df716d6c629d770757027-1"><span class="crayon-h">		</span><span class="crayon-r">&lt;resources&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c629d770757027-2"><span class="crayon-i">			</span><span class="crayon-r">&lt;resource&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c629d770757027-3"><span class="crayon-i">				</span><span class="crayon-r">&lt;directory&gt;</span><span class="crayon-i">src/main/resources</span><span class="crayon-r">&lt;/directory&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c629d770757027-4"><span class="crayon-i">				</span><span class="crayon-r">&lt;includes&gt;</span><span class="crayon-i">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-5df716d6c629d770757027-5"><span class="crayon-i">		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">&lt;include&gt;</span><span class="crayon-i">**/*.properties</span><span class="crayon-r">&lt;/include&gt;</span><span class="crayon-i">&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c629d770757027-6"><span class="crayon-i">		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">&lt;include&gt;</span><span class="crayon-i">**/*.xml</span><span class="crayon-r">&lt;/include&gt;</span><span class="crayon-i">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-5df716d6c629d770757027-7"><span class="crayon-i">		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">&lt;include&gt;</span><span class="crayon-i">**/*.p12</span><span class="crayon-r">&lt;/include&gt;</span><span class="crayon-i">&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c629d770757027-8"><span class="crayon-i">		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">&lt;include&gt;</span><span class="crayon-i">**/*.txt</span><span class="crayon-r">&lt;/include&gt;</span><span class="crayon-i">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-5df716d6c629d770757027-9"><span class="crayon-i">		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">&lt;/includes&gt;</span><span class="crayon-i"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c629d770757027-10"><span class="crayon-i">				</span><span class="crayon-r">&lt;excludes&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c629d770757027-11"><span class="crayon-i">					</span><span class="crayon-r">&lt;exclude&gt;</span><span class="crayon-i">a_conf*/*/*</span><span class="crayon-r">&lt;/exclude&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c629d770757027-12"><span class="crayon-i">					</span><span class="crayon-r">&lt;exclude&gt;</span><span class="crayon-i">a_conf*/*</span><span class="crayon-r">&lt;/exclude&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c629d770757027-13"><span class="crayon-i">				</span><span class="crayon-r">&lt;/excludes&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c629d770757027-14"><span class="crayon-i">			</span><span class="crayon-r">&lt;/resource&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c629d770757027-15"><span class="crayon-i">			</span><span class="crayon-r">&lt;resource&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c629d770757027-16"><span class="crayon-i">				</span><span class="crayon-r">&lt;directory&gt;</span><span class="crayon-i">src/main/resources</span><span class="crayon-r">&lt;/directory&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c629d770757027-17"><span class="crayon-i">				</span><span class="crayon-c">&lt;!-- 包含，若没有指定则默认为 activeByDefault 标签定义的profile --&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c629d770757027-18"><span class="crayon-i">				</span><span class="crayon-r">&lt;includes&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c629d770757027-19"><span class="crayon-i">					</span><span class="crayon-r">&lt;include&gt;</span><span class="crayon-i">${profiles.activation}/*</span><span class="crayon-r">&lt;/include&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c629d770757027-20"><span class="crayon-i">					</span><span class="crayon-r">&lt;include&gt;</span><span class="crayon-i">${profiles.activation}/*/**</span><span class="crayon-r">&lt;/include&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c629d770757027-21"><span class="crayon-i">				</span><span class="crayon-r">&lt;/includes&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c629d770757027-22"><span class="crayon-i">			</span><span class="crayon-r">&lt;/resource&gt;</span><span class="crayon-i">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-5df716d6c629d770757027-23"><span class="crayon-i">		</span><span class="crayon-r">&lt;/resources&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0018 seconds] -->
<p>5，利用maven-war-plugin插件，指定拷贝的配置文件路径。</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5df716d6c62a4917934488" class="crayon-syntax crayon-theme-tomorrow-night crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">XHTML</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
			&lt;plugin&gt;
				&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
				&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
				&lt;configuration&gt;
					&lt;archive&gt;
						&lt;addMavenDescriptor&gt;false&lt;/addMavenDescriptor&gt;
					&lt;/archive&gt;
					&lt;webResources&gt;
						&lt;resource&gt;
							&lt;!-- this is relative to the pom.xml directory --&gt;
							&lt;directory&gt;src/main/resources/${profiles.activation}&lt;/directory&gt;
							&lt;targetPath&gt;WEB-INF/classes&lt;/targetPath&gt;
							&lt;filtering&gt;true&lt;/filtering&gt;
						&lt;/resource&gt;
					&lt;/webResources&gt;
				&lt;/configuration&gt;
			&lt;/plugin&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5df716d6c62a4917934488-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c62a4917934488-2">2</div><div class="crayon-num" data-line="crayon-5df716d6c62a4917934488-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c62a4917934488-4">4</div><div class="crayon-num" data-line="crayon-5df716d6c62a4917934488-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c62a4917934488-6">6</div><div class="crayon-num" data-line="crayon-5df716d6c62a4917934488-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c62a4917934488-8">8</div><div class="crayon-num" data-line="crayon-5df716d6c62a4917934488-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c62a4917934488-10">10</div><div class="crayon-num" data-line="crayon-5df716d6c62a4917934488-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c62a4917934488-12">12</div><div class="crayon-num" data-line="crayon-5df716d6c62a4917934488-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c62a4917934488-14">14</div><div class="crayon-num" data-line="crayon-5df716d6c62a4917934488-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5df716d6c62a4917934488-16">16</div><div class="crayon-num" data-line="crayon-5df716d6c62a4917934488-17">17</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5df716d6c62a4917934488-1"><span class="crayon-h">			</span><span class="crayon-r">&lt;plugin&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c62a4917934488-2"><span class="crayon-i">				</span><span class="crayon-r">&lt;groupId&gt;</span><span class="crayon-i">org.apache.maven.plugins</span><span class="crayon-r">&lt;/groupId&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c62a4917934488-3"><span class="crayon-i">				</span><span class="crayon-r">&lt;artifactId&gt;</span><span class="crayon-i">maven-war-plugin</span><span class="crayon-r">&lt;/artifactId&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c62a4917934488-4"><span class="crayon-i">				</span><span class="crayon-r">&lt;configuration&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c62a4917934488-5"><span class="crayon-i">					</span><span class="crayon-r">&lt;archive&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c62a4917934488-6"><span class="crayon-i">						</span><span class="crayon-r">&lt;addMavenDescriptor&gt;</span><span class="crayon-i">false</span><span class="crayon-r">&lt;/addMavenDescriptor&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c62a4917934488-7"><span class="crayon-i">					</span><span class="crayon-r">&lt;/archive&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c62a4917934488-8"><span class="crayon-i">					</span><span class="crayon-r">&lt;webResources&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c62a4917934488-9"><span class="crayon-i">						</span><span class="crayon-r">&lt;resource&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c62a4917934488-10"><span class="crayon-i">							</span><span class="crayon-c">&lt;!-- this is relative to the pom.xml directory --&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c62a4917934488-11"><span class="crayon-i">							</span><span class="crayon-r">&lt;directory&gt;</span><span class="crayon-i">src/main/resources/${profiles.activation}</span><span class="crayon-r">&lt;/directory&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c62a4917934488-12"><span class="crayon-i">							</span><span class="crayon-r">&lt;targetPath&gt;</span><span class="crayon-i">WEB-INF/classes</span><span class="crayon-r">&lt;/targetPath&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c62a4917934488-13"><span class="crayon-i">							</span><span class="crayon-r">&lt;filtering&gt;</span><span class="crayon-i">true</span><span class="crayon-r">&lt;/filtering&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c62a4917934488-14"><span class="crayon-i">						</span><span class="crayon-r">&lt;/resource&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c62a4917934488-15"><span class="crayon-i">					</span><span class="crayon-r">&lt;/webResources&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5df716d6c62a4917934488-16"><span class="crayon-i">				</span><span class="crayon-r">&lt;/configuration&gt;</span></div><div class="crayon-line" id="crayon-5df716d6c62a4917934488-17"><span class="crayon-i">			</span><span class="crayon-r">&lt;/plugin&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0013 seconds] -->
<p>6，war项目中的代码做出相应的调整。下图的两个红框是默认的开发的配置，绿色的框是仿真环境的配置，深蓝色的框是生成环境的配置，这三套配置都是实际的参数而不是形参。注意红色箭头的的tmp文件里什么都没有，只是一个文件，之所以要加上是访问maven处理resource的时候报错。</p>
<p><a href="/wp-content/uploads/2017/11/c.png"><img class="alignnone size-full wp-image-335" src="/wp-content/uploads/2017/11/c.png" alt="" width="358" height="427" srcset="/wp-content/uploads/2017/11/c.png 358w, /wp-content/uploads/2017/11/c-252x300.png 252w" sizes="(max-width: 358px) 100vw, 358px" /></a></p>
<p>&nbsp;</p>
<p>以上，基本上就完成了一开始的计划。虽然看上去，思路比较简单，但是一开始受eclipse的发布路径的影响，maven插件的影响导致更换了几套思路和实现方法，最后选择这种对比起来最简单的一种方式。唯一的遗憾是，每次增加一种新的配置的时候，三个配置文件都需要进行改动，不过相对这个改动时间，节省下来的编译和发包的时间是更有意义的。</p>
    </div>
  </div>
</article>
          <article data-page="4" class="post-329 post type-post status-publish format-standard hentry category-uncategorized dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">标准</div>
    <header>
      <h2 class="entry-title"><a href="/archives/329.html">这个锅必须让微信背</a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/329.html"><time class="published" datetime="2017-11-15T10:00:07+00:00">2017年11月15日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/uncategorized" rel="category tag">技术总结分享</a></span>
</div>
    </header>
    <div class="entry-content">
      <p>偶然遇到一个客户反馈，给他们家做的微导览，部分苹果手机打不开，细问之后是i6p和i6sp两种手机。</p>
<p>之前出现过这种情况，但是不能稳定复现，找不到原因。而且技术上讲也不应该会出现其他手机都OK，而只有这两种手机出问题的情况。</p>
<p>通过慢慢排查排除了网页问题，排除了CDN问题。</p>
<p>客户又在外地无法调试他的手机，本地找了两个型号的手机测试的结果竟然是正常的。</p>
<p>最后无意间发现其中的一段聊天记录，客户反馈对话中的两个链接上面的链接是可以打开的，而下面的链接打开白屏。</p>
<p><a href="/wp-content/uploads/2017/11/b.png"><img class="alignnone size-full wp-image-331" src="/wp-content/uploads/2017/11/b.png" alt="" width="361" height="258" srcset="/wp-content/uploads/2017/11/b.png 361w, /wp-content/uploads/2017/11/b-300x214.png 300w" sizes="(max-width: 361px) 100vw, 361px" /></a></p>
<p>这里突然有一个东西让我注意到了，第二个链接的颜色是不一样的，有点是蓝色，有的是黑色。会不会？难道是？ 访问链接的时候链接被微信截断了？</p>
<p>让客户把他打开链接出错的页面重新分享给我，打开一看真是少了字符。</p>
<p>总结起来看，只有大屏手机才会出现这个问题，而且只有ios版的微信处理了这个事情，所以才会出现只有i6p和i6sp两种大屏手机报错的情况。</p>
<p>长记性，这个bug找的真是曲折万千，以后微信分享要谨慎，尽量使用链接而不要分享文本链接。</p>
<p>&nbsp;</p>
    </div>
  </div>
</article>
          <article data-page="4" class="post-324 post type-post status-publish format-standard hentry category-17 dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">标准</div>
    <header>
      <h2 class="entry-title"><a href="/archives/324.html">眼瞅着要超过三万里程了。</a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/324.html"><time class="published" datetime="2017-10-30T09:12:15+00:00">2017年10月30日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/%e6%97%a5%e5%b8%b8" rel="category tag">日常</a></span>
</div>
    </header>
    <div class="entry-content">
      <p><a href="/wp-content/uploads/2017/10/微信图片_20171030090910.jpg"><img class="alignnone size-large wp-image-325" src="/wp-content/uploads/2017/10/微信图片_20171030090910-576x1024.jpg" alt="" width="465" height="827" srcset="/wp-content/uploads/2017/10/微信图片_20171030090910-576x1024.jpg 576w, /wp-content/uploads/2017/10/微信图片_20171030090910-169x300.jpg 169w, /wp-content/uploads/2017/10/微信图片_20171030090910-768x1365.jpg 768w, /wp-content/uploads/2017/10/微信图片_20171030090910.jpg 1080w" sizes="(max-width: 465px) 100vw, 465px" /></a></p>
    </div>
  </div>
</article>
          <article data-page="4" class="post-320 post type-post status-publish format-image hentry category-17 post_format-post-format-image dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">图像</div>
    <header>
      <h2 class="entry-title"><a href="/archives/320.html"></a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/320.html"><time class="published" datetime="2017-09-28T13:10:21+00:00">2017年9月28日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/%e6%97%a5%e5%b8%b8" rel="category tag">日常</a></span>
</div>
    </header>
    <div class="entry-content">
      <p><a href="/wp-content/uploads/2017/09/v2-f625c7581a28738365819ffae1c7e0c7_hd.gif"><img class="alignnone size-full wp-image-321" src="/wp-content/uploads/2017/09/v2-f625c7581a28738365819ffae1c7e0c7_hd.gif" alt="" width="280" height="204" /></a></p>
    </div>
  </div>
</article>
          <article data-page="4" class="post-316 post type-post status-publish format-standard hentry category-17 dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">标准</div>
    <header>
      <h2 class="entry-title"><a href="/archives/316.html">为什么在百度里搜知乎这一条关于程序员的问题会这么靠前</a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/316.html"><time class="published" datetime="2017-09-28T13:01:56+00:00">2017年9月28日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/%e6%97%a5%e5%b8%b8" rel="category tag">日常</a></span>
</div>
    </header>
    <div class="entry-content">
      <p><a href="/wp-content/uploads/2017/09/QQ截图20170928130124.png"><img class="alignnone size-full wp-image-317" src="/wp-content/uploads/2017/09/QQ截图20170928130124.png" alt="" width="803" height="791" srcset="/wp-content/uploads/2017/09/QQ截图20170928130124.png 803w, /wp-content/uploads/2017/09/QQ截图20170928130124-300x296.png 300w, /wp-content/uploads/2017/09/QQ截图20170928130124-768x757.png 768w" sizes="(max-width: 803px) 100vw, 803px" /></a></p>
    </div>
  </div>
</article>
          <article data-page="4" class="post-310 post type-post status-publish format-standard hentry category-17 dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">标准</div>
    <header>
      <h2 class="entry-title"><a href="/archives/310.html">转眼都已经入行十年了，决定给陪伴十年的工具eclipse捐点钱</a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/310.html"><time class="published" datetime="2017-09-14T17:22:20+00:00">2017年9月14日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/%e6%97%a5%e5%b8%b8" rel="category tag">日常</a></span>
</div>
    </header>
    <div class="entry-content">
      <p><a href="/wp-content/uploads/2017/09/QQ截图20170914171943.png"><img class="alignnone wp-image-313 size-large" src="/wp-content/uploads/2017/09/QQ截图20170914171943-1024x521.png" alt="" width="465" height="237" srcset="/wp-content/uploads/2017/09/QQ截图20170914171943-1024x521.png 1024w, /wp-content/uploads/2017/09/QQ截图20170914171943-300x153.png 300w, /wp-content/uploads/2017/09/QQ截图20170914171943-768x391.png 768w, /wp-content/uploads/2017/09/QQ截图20170914171943.png 1195w" sizes="(max-width: 465px) 100vw, 465px" /></a></p>
<p><a href="/wp-content/uploads/2017/09/QQ截图20170914171806.png"><img class="alignnone wp-image-312 size-large" src="/wp-content/uploads/2017/09/QQ截图20170914171806-1024x743.png" alt="" width="465" height="337" srcset="/wp-content/uploads/2017/09/QQ截图20170914171806-1024x743.png 1024w, /wp-content/uploads/2017/09/QQ截图20170914171806-300x218.png 300w, /wp-content/uploads/2017/09/QQ截图20170914171806-768x558.png 768w, /wp-content/uploads/2017/09/QQ截图20170914171806.png 1204w" sizes="(max-width: 465px) 100vw, 465px" /></a></p>
<p><a href="/wp-content/uploads/2017/09/QQ截图20170914171639.png"><img class="alignnone wp-image-311 size-medium" src="/wp-content/uploads/2017/09/QQ截图20170914171639-300x209.png" alt="" width="300" height="209" srcset="/wp-content/uploads/2017/09/QQ截图20170914171639-300x209.png 300w, /wp-content/uploads/2017/09/QQ截图20170914171639-768x536.png 768w, /wp-content/uploads/2017/09/QQ截图20170914171639.png 891w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
    </div>
  </div>
</article>
          <article data-page="4" class="post-306 post type-post status-publish format-standard hentry category-17 dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">标准</div>
    <header>
      <h2 class="entry-title"><a href="/archives/306.html">程序员真是个高危行业</a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/306.html"><time class="published" datetime="2017-08-25T14:36:10+00:00">2017年8月25日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/%e6%97%a5%e5%b8%b8" rel="category tag">日常</a></span>
</div>
    </header>
    <div class="entry-content">
      <p><a href="/wp-content/uploads/2017/08/QQ图片20170825143518.jpg"><img class="aligncenter wp-image-307 size-large" src="/wp-content/uploads/2017/08/QQ图片20170825143518-576x1024.jpg" alt="" width="465" height="827" srcset="/wp-content/uploads/2017/08/QQ图片20170825143518-576x1024.jpg 576w, /wp-content/uploads/2017/08/QQ图片20170825143518-169x300.jpg 169w, /wp-content/uploads/2017/08/QQ图片20170825143518.jpg 615w" sizes="(max-width: 465px) 100vw, 465px" /></a></p>
    </div>
  </div>
</article>
          <article data-page="4" class="post-302 post type-post status-publish format-standard hentry category-uncategorized dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">标准</div>
    <header>
      <h2 class="entry-title"><a href="/archives/302.html">在市场部发现了一个打火机，问谁谁都不承认是自己的，这绿色的打火机都点燃激情了，竟然没有人要，哈哈！</a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/302.html"><time class="published" datetime="2017-08-18T16:16:38+00:00">2017年8月18日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/uncategorized" rel="category tag">技术总结分享</a></span>
</div>
    </header>
    <div class="entry-content">
      <p><a href="/wp-content/uploads/2017/08/微信图片_20170818161516.jpg"><img class="alignnone wp-image-303 size-medium" src="/wp-content/uploads/2017/08/微信图片_20170818161516-225x300.jpg" alt="" width="225" height="300" srcset="/wp-content/uploads/2017/08/微信图片_20170818161516-225x300.jpg 225w, /wp-content/uploads/2017/08/微信图片_20170818161516-768x1026.jpg 768w, /wp-content/uploads/2017/08/微信图片_20170818161516-766x1024.jpg 766w, /wp-content/uploads/2017/08/微信图片_20170818161516.jpg 958w" sizes="(max-width: 225px) 100vw, 225px" /></a> <a href="/wp-content/uploads/2017/08/微信图片_20170818161521.jpg"><img class="alignnone wp-image-304 size-medium" src="/wp-content/uploads/2017/08/微信图片_20170818161521-225x300.jpg" alt="" width="225" height="300" srcset="/wp-content/uploads/2017/08/微信图片_20170818161521-225x300.jpg 225w, /wp-content/uploads/2017/08/微信图片_20170818161521-768x1026.jpg 768w, /wp-content/uploads/2017/08/微信图片_20170818161521-766x1024.jpg 766w, /wp-content/uploads/2017/08/微信图片_20170818161521.jpg 958w" sizes="(max-width: 225px) 100vw, 225px" /></a></p>
    </div>
  </div>
</article>
          <article data-page="4" class="post-300 post type-post status-publish format-quote hentry category-uncategorized post_format-post-format-quote dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">引语</div>
    <header>
      <h2 class="entry-title"><a href="/archives/300.html">上周末去了一趟项目现场跟乙方核对工作量，乙方代表严重刷新了我对人类心理素质的理解，在证据确凿的情况下还能坚持狡辩，我表示服气，真是长见识。</a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/300.html"><time class="published" datetime="2017-08-18T16:13:41+00:00">2017年8月18日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/uncategorized" rel="category tag">技术总结分享</a></span>
</div>
    </header>
    <div class="entry-content">
          </div>
  </div>
</article>
          <article data-page="4" class="post-296 post type-post status-publish format-standard hentry category-uncategorized dwtl normal">
  <div class="entry-inner">
        <div class="entry-format">标准</div>
    <header>
      <h2 class="entry-title"><a href="/archives/296.html">git中错误提交的文件的在ignore文件中配置后仍不起作用的解决</a></h2>
      <div class="entry-meta">
	<span class="entry-author">
				<span class="byline author vcard">
			By <a href="/archives/author/admin" rel="author" class="fn">武鹏</a>
		</span>
	</span>
	<span class="sep">&bull;</span>
	<span class="entry-date">On <a href="/archives/296.html"><time class="published" datetime="2017-07-28T14:51:24+00:00">2017年7月28日</time></a></span>
	<span class="sep">&bull;</span>
	<span class="cat-links">In 
	<a href="/archives/category/uncategorized" rel="category tag">技术总结分享</a></span>
</div>
    </header>
    <div class="entry-content">
      <p>先要把整个文件或者文件夹从缓存中删掉。</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5df716d6ca203205688292" class="crayon-syntax crayon-theme-tomorrow-night crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
git rm -r --cached dir</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5df716d6ca203205688292-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5df716d6ca203205688292-1"><span class="crayon-e">git </span><span class="crayon-v">rm</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">r</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">cached </span><span class="crayon-v">dir</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
<p>然后commit一次，ignore文件中增加整个文件或者路径，然后在commit，push就解决了。</p>
    </div>
  </div>
</article>
    
          <nav class="post-nav">
        <ul class="pager">
          <li class="previous"><a href="/page/5" >&larr; Older posts</a></li>
          <li class="next"><a href="/page/3" >Newer posts &rarr;</a></li>
        </ul>
      </nav>
      </div>      </main>
    </div>
  </div>
  <div class="bottom-info">
<div style="font-size: 12px;text-align: center;padding:28px 0 0 0">@娱乐性质的个人Blog，技术文章居多，偶发性会有深思文，请谨慎关注，随意转发，如果可以请把出处写上
</div>
<div style="font-size: 10px;text-align: center;padding:5px 0 0 0">联系我，个人微博，Twitter，FaceBook等等各种账号，请@tiaobug，Email: i@tiaobug.com
</div>
<div style="font-size: 12px;text-align: center;padding:5px 0 12px 0 ">鲁ICP备17013530号
</div>
</div><script type='text/javascript' src='/wp-content/themes/dw-timeline/assets/js/vendor/jquery.infinitescroll.min.js?ver=4.8.12'></script>
<script type='text/javascript' src='/wp-content/themes/dw-timeline/assets/js/vendor/bootstrap-3.0.3.min.js?ver=4.8.12'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var dwtl = {"template_directory_uri":"http:\/\/www.tiaobug.com\/wp-content\/themes\/dw-timeline"};
var infinitescroll = {"page":"page","the_end":"the end"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/themes/dw-timeline/assets/js/scripts.js?ver=4.8.12'></script>
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.8.12'></script>

</body>
</html>
